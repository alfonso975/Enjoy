<!DOCTYPE html>
<!-- Create By Alfonso Lopez -->
<html>
    <head>
        <title>Enjoy</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="fuente/comicS.css">
        <link rel="icon" href="img/icon.png" />
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" crossorigin="anonymous">
        <script src="https://kit.fontawesome.com/637f7442f6.js" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.linearicons.com/free/1.0.0/icon-font.min.css">
        <link rel="stylesheet" href="script/css/body.css">
        <link rel="stylesheet" href="script/css/profile1.css"> 
        <link rel="stylesheet" href="script/css/scrooll1.css">

        <style>
            @font-face {
                font-family: "Comic Sans MS";
                src: url("fuente/comic-sans-ms-4.ttf");
            }

            .campo span {

                right: 5px;
                top: 8px;                
                cursor: pointer;
                padding-right: 10px;

            }
            li{
                list-style-type: disc;
            }
            .pestana{
                border:2px;
                border-top-left-radius: 20px ;
                border-top-right-radius: 20px ;
                border-style: solid;
                border-color: white;
                border-bottom: none;
            }
            .pla{

                background: rgba(248,248,245,.5);
                border-style: none;
                /*transicion lenta*/
                transition: 0.5s ease-in;
                outline: none;
                box-shadow: none;
                border-radius: 15px;
                color: white;
                font-family: "Comic Sans MS", cursive;   

                font-size: 16px;
                padding: 8px

            }
            .pla:focus{
                background: rgba(248,248,245,.2);
                outline: none;
                box-shadow: none;
                color: white;
                font-family: 'Comic Sans MS', cursive;
            }
            .pla::placeholder{
                color: white;
                font-family: 'Comic Sans MS', cursive
            }
            .zoom:hover{
                transform: scale(1.2);
            }
            .zoom:focus{
                transform: scale(1);
            }
            .dropdown > .dropdown-item:hover{
                /*Modifica lo que quieras*/
                background-color: #04242c;
                color:white;
            }
            .navbar {
                margin-bottom: 0;
                background-color: #f4511e;
                line-height: 1.42857143 !important;
                letter-spacing: 4px;
                font-family: Montserrat, sans-serif;}
            @media (min-width: 992px) {
                .ocultar-div{
                    display:none;
                }
            }
            @media (max-width: 991px) {
                .ocultar-nav{
                    display:none;
                }
            }
            .loader {
                position: fixed;
                left: 0px;
                top: 0px;
                width: 100%;
                height: 100%;
                /*z-index mustra este div por encima de todos*/
                z-index: 9999;
                background: url('img/loading.gif') 50% 50% no-repeat rgb(249,249,249);
                background-color: #020000;
                align-items: center;
                display: flex;
                opacity: .9;
                justify-content: center;
            }
        </style>
    </head>
    <body style="background-color: #131313;
          background-size: cover;overflow-x: hidden;
          background-attachment: fixed" class="scrol scrol-thumb">
        <div style="position: fixed;top: 0px;width: 100%;display: block;padding: 0px" class="sticky-top">
            <nav class="navbar bg-dark navbar-expand-lg navbar-toggleable-xl" style="background-color: #343a40;padding: 0px;justify-content: space-around;margin: 0px">
                <div class="navbar-toggler" style="padding: 0px;justify-content: space-around;width: 100%" >
                    <ul class="nav justify-content-around" style="padding: 0px;">
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="publicaciones.html" style="padding: 0px;padding-right: 5px;background-color: #343a40">
                                <img src="img/camRetro.png" style="height: 30px;width: 30px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>                        
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="search.html" style="padding: 0;padding-right: 5px;background-color: #343a40">
                                <img src="img/iconUsers.png" style="height: 30px;width: 30px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item " id="s" href="subir.html" style="padding: 0;padding-right: 5px;background-color: #343a40">
                                <img src="img/add .png" style="height: 30px;width: 30px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" id="button_NotT" onclick="deleteN()" style="padding: 0;padding-right: 5px;background-color: #343a40">
                                <div id="notT" class="p-0" style="padding:0px">
                                    <img src="img/notification (1).png" style="height: 30px;width: 30px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                                </div>
                            </a>
                        </li>



                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="profile.html" style="padding: 0;padding-right: 5px;background-color: #343a40">
                                <img id="imgprofile1" style="width: 30px;height: 30px;border-radius: 18px;object-fit:cover;margin-top: 8px;margin-bottom: 8px" src="img/user.png" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <div class="dropdown show p-0">
                                <a  href="#" style="width: 3px;height: 3px;background-color: #343a40" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img id="downR" src="img/down.png" style="width: 12px;margin-top: 16px;margin-bottom: 8px" class="zoom">
                                </a>

                                <div class="dropdown-menu dropdown dropdown-menu-right" aria-labelledby="dropdownMenuLink" style="background-color:  #343a40">
                                    <a class="dropdown-item text-light mb-1" href="profile.html">
                                        <img style="width: 20px;height: 20px;border-radius: 200px;margin-right: 5px" src="img/userd.png">Perfil
                                    </a>
                                    <a class="dropdown-item text-light mb-1" href="tienda.html">
                                        <img style="width: 20px;height: 20px;margin-right: 5px" src="img/tienda.png">Store
                                    </a>
                                    <a id="drop_men" class="dropdown-item text-light mb-1" onclick="deleteM()" href="#">
                                        <img id="notificacion1" style="width: 20px;height: 20px;margin-right: 5px" src="img/mensajeW.png">Chat
                                    </a>

                                    <a class="dropdown-item text-light mb-1" href="settings.html">
                                        <img style="width: 20px;height: 20px;margin-right: 5px" src="img/settings.png">Configuracion
                                    </a>
                                    <a class="dropdown-item text-light mb-1" id="cerrarS">
                                        <img style="width: 20px;height: 20px;margin-right: 5px" src="img/logout.png">Cerrar Sesion
                                    </a>
                                </div>
                            </div>
                        </li>







                    </ul>
                </div>

                <div class="navbar justify-content-center ocultar-nav bg-dark" style="padding: 0px;margin-bottom: 0px">
                    <ul class="nav justify-content-center" style="padding: 0px">
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="publicaciones.html" style="padding: 0px;padding-right: 25px;background-color: #343a40">
                                <img src="img/camRetro.png" style="height: 35px;width: 35px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>                        
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="search.html" style="padding: 0;padding-right: 25px;background-color: #343a40">
                                <img src="img/iconUsers.png" style="height: 30px;width: 35px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="tienda.html" style="padding: 0;padding-right: 25px;background-color: #343a40">
                                <img src="img/tienda.png" style="height: 33px;width: 35px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item " id="s" href="subir.html" style="padding: 0;padding-right: 25px;background-color: #343a40">
                                <img src="img/add .png" style="height: 35px;width: 35px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px;cursor: pointer">
                            <a class="nav-item " id="button_Men" onclick="deleteM()" style="padding: 0;padding-right: 25px;background-color: #343a40">
                                <img id="notificacion" src="img/mensajeW.png" style="width: 35px;height: 35px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                            </a>
                        </li>


                        <li class="nav-item p-0" style="padding: 0px;cursor: pointer">
                            <a class="nav-item nav-link" id="button_Not" onclick="deleteN()" style="padding: 0;padding-right: 25px;background-color: #343a40">
                                <div id="not" class="p-0" style="padding:0px">
                                    <img src="img/notification (1).png" style="height: 35px;width: 35px;margin-top: 8px;margin-bottom: 8px" class="zoom">
                                </div>
                            </a>
                        </li>


                        <li class="nav-item p-0" style="padding: 0px">
                            <a class="nav-item nav-link" href="profile.html" style="padding: 0;padding-right: 25px;background-color: #343a40">
                                <img id="imgprofile" style="width: 35px;height: 35px;border-radius: 18px;object-fit:cover;margin-top: 8px;margin-bottom: 8px" src="img/user.png" class="zoom">
                            </a>
                        </li>
                        <li class="nav-item p-0" style="padding: 0px">
                            <div class="dropdown show p-0">
                                <a  href="#" style="width: 3px;height: 3px;background-color: #343a40" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <img src="img/down.png" style="width: 12px;margin-top: 16px;margin-bottom: 8px" class="zoom">
                                </a>

                                <div class="dropdown-menu dropdown" aria-labelledby="dropdownMenuLink" style="background-color:  #343a40">
                                    <a class="dropdown-item text-light mb-1" href="profile.html">
                                        <img style="width: 20px;height: 20px;border-radius: 200px;margin-right: 5px" src="img/userd.png">Perfil
                                    </a>

                                    <a class="dropdown-item text-light mb-1" href="settings.html">
                                        <img style="width: 20px;height: 20px;margin-right: 5px" src="img/settings.png">Configuracion
                                    </a>
                                    <a class="dropdown-item text-light mb-1" id="cerrar">
                                        <img style="width: 20px;height: 20px;margin-right: 5px" src="img/logout.png">Cerrar Sesion
                                    </a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        <div style="height: 55px">s </div>
        <input id="compdataPub" class="hid" value="false" style="display: none" readonly="readonly" onkeypress="eliminar()">
        <input id="compdatalikes" class="hid" value="false" style="display: none" readonly="readonly" onkeypress="eliminar()">
        <input id="compdataMensajeria" class="hid" value="false" style="display: none" readonly="readonly" onkeypress="eliminar()">
        <input id="compdatabandeja1" class="hid" value="false" style="display: none" readonly="readonly" onkeypress="eliminar()">
        <input id="compdatabandeja2" class="hid" value="false" style="display: none" readonly="readonly" onkeypress="eliminar()">
        <div class="" id="loader" style="background-color: #181b22;text-align: center;display: none">
            <h2 id='loaderMensaje' style="font-size: 40px;text-align: center;color: #2aa58a" class="justify-content-center">
                Actualizando datos, el tiempo de carga depende de su conexion...
            </h2>
        </div>
        <div class="container-fluid text-center mt-3">
            <div class="container-fluid p">
                <div class="row" style="justify-content: space-between">
                    <div id="editP" class="col text-light pestana" style="cursor: pointer;Word-wrap: break-Word;  max-width: 32%;padding: 3px;font-size: 20px;font-family: 'Comic Sans MS', cursive;padding-bottom: 0px" >         
                        Editar perfil
                    </div>
                    <div id="verificar" class="col text-light" style="cursor: pointer;Word-wrap: break-Word;  max-width: 32%;padding: 3px;font-size: 20px;font-family: 'Comic Sans MS', cursive;padding-bottom: 0px">
                        Verificar cuenta
                    </div>
                    <div id="deleteA" class="col text-light" style="cursor: pointer;Word-wrap: break-Word;  max-width: 32%;padding: 3px;font-size: 20px;font-family: 'Comic Sans MS', cursive;padding-bottom: 0px">
                        Eliminar cuenta
                    </div>
                </div>
            </div>
            <hr style='margin-top: 0px;height: 2px;margin-left: 6%;margin-right: 6%;background-color: white;border: 0;background:linear-gradient(30deg, #1c4c9c, #FDFDFD,#1c4c9c);'>                                                      
        </div>

        <div class="container-fluid" id="div_EditP">
            <div id="btnSC" class="row justify-content-center">
                <button class="btn text-light zoom" onclick="compIMG()" style="width: auto;border-color: #bcc4c3;margin-bottom: 10px;margin-right: 10px;font-family: 'Comic Sans MS', cursive;font-size: 20px;display: flex; align-items: center;">
                    <img src="img/save.png" style="margin-right: 8px;width: 35px;height: auto">Guardar Cambios
                </button>

            </div>
            <div id="nombre" class="container">
                <div class="row">
                    <h2 style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 25px">Nombre:</h2>
                    <h2 id="cantCaracteresN" style="margin-left: 5px;color: white;font-family: 'Comic Sans MS', cursive;font-size: 25px">0/25</h2>
                </div>
                <h2 id="errorName" style="color: red;font-family: 'Comic Sans MS', cursive;font-size: 15px"></h2> 
                <input onkeypress="nameerrorName()" onkeyup="onKeyUp(event, this.value)" onclick="nameerrorName()" id='nameForm' type="text" class="pla" style="border-radius: 10px;width: 50%;font-family: 'Comic Sans MS', cursive" maxlength="25" value="" placeholder="Nombre...">
            </div>

            <div id='contra' class="container mt-3">
            </div>

            <div id='suscripcion' class="container mt-3">
                <h2 style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 25px">Suscripcion mensual ($USD)</h2><h2 id="errorSusM" style="color: red;font-family: 'Comic Sans MS', cursive;font-size: 15px"></h2><input onclick="suserrorSusM()" onkeyup="validarSusM()" id="susM" type="number" class="pla" style="border-radius: 10px;width: 50%;font-family: 'Comic Sans MS', cursive" value="5">
            </div>
            <div id="presentacion" class="container mt-3">
                <div class="row">
                    <h2 style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 25px;margin-bottom: 0px">Presentacion:</h2>
                    <h2 id="cantCaracteres" style="margin-left: 5px;color: white;font-family: 'Comic Sans MS', cursive;font-size: 25px">0/150</h2>
                    <h2 id="errorCaracteres" style="margin-left: 5px;color: red;font-family: 'Comic Sans MS', cursive;font-size: 25px"></h2>
                </div>
                <textarea onkeyup="validarCaracteres()" id='presentation' class="pla scrol scrol-thumb" style="border-radius: 10px;font-family: 'Comic Sans MS', cursive;height: 80px;width: 100%" placeholder="Presentacion o descripcion de su perfil..."></textarea>
            </div>
            <div id="codigoInvitacion" class="container">
                <div class="row">
                    <h2 style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 25px">Codigo de Invitacion</h2>
                </div>
                <h2 id="errorcodigoInvitacion" style="color: red;font-family: 'Comic Sans MS', cursive;font-size: 15px"></h2> 
                <input onkeypress="codigoInvitacionerror()" id='codigoInvitacionInput' type="text" class="pla" style="border-radius: 10px;width: 50%;font-family: 'Comic Sans MS', cursive" maxlength="6" value="" placeholder="Codigo de invitacion...">
            </div>
            <div id="profileFoto" class="container text-center mt-3">
                <img id='imgp' src="img/user.png" style="width: 35%;object-fit: cover;border-radius: 400px">
                <div class="row justify-content-center">

                    <div id="cargar" style="text-align: center;align-content: center;width: auto;margin-right: 3px;margin-top: 5px">
                        <label id="labelprofile" class="btn text-light" style="border-radius: 15px;font-family: 'Comic Sans MS', cursive;font-size: 20px;align-self: center;background:linear-gradient(0deg, #17507c,#17507c,#17507c,#19648d);width: 100%">
                            <i class="fas fa-camera-retro" style="margin-right: 8px"></i>Profile photo
                            <input type="file" id="file" class="btn btn-block" style="display: none;" accept="image/*">
                        </label>
                    </div>
                </div>
            </div>
            <div id='portada' class="container text-center mt-3">
                <img id="portadaImg" src="img/b.jpg" style="width: 50%;border-radius: 25px">
                <div class="row justify-content-center">

                    <div id="cargarP" style="text-align: center;align-content: center;width: auto;margin-right: 3px;margin-top: 5px">
                        <label id="labelP" class="btn text-light" style="border-radius: 15px;font-family: 'Comic Sans MS', cursive;font-size: 20px;align-self: center;background:linear-gradient(0deg, #17507c,#17507c,#17507c,#19648d);width: 100%">
                            <i class="fas fa-cogs" style="margin-right: 8px"></i>Cover photo
                            <input type="file" id="fileP" class="btn btn-block" style="display: none;" accept="image/*">
                        </label>
                    </div>
                </div>
            </div>
            <input type="text" id="key" value="" style="display: none" readonly="readonly" onkeypress="eliminar()">

            <input type="text" id="correo" value="" style="display: none" readonly="readonly" onkeypress="eliminar()">
            <div class="row justify-content-center">
                <div class="container-fluid justify-content-center" style="text-align: center">
                    <h2 id="errorNameG" style="color: red;font-family: 'Comic Sans MS', cursive;font-size: 18px"></h2>
                </div>
                <button class="btn text-light zoom" onclick="compIMG()" style="width: auto;border-color: #bcc4c3;margin-bottom: 50px;margin-top: 25px;font-family: 'Comic Sans MS', cursive;font-size: 20px;display: flex; align-items: center;">

                    <img src="img/save.png" style="margin-right: 8px;width: 35px;height: auto">Guardar Cambios
                </button>

            </div>   
        </div>
        <div id="div_verificar" style="display: none">
            <div class="container">
                <div class="container" id="divMEV" style="background-color: rgba(42,165,138,.2);border-radius: 15px">
                    <h2 style="color:white;font-family: 'Comic Sans MS', cursive;text-align: center;margin-bottom: 20px">Necesita al menos 500 Enjoyers para solicitar verificacion<img src="img/checked.png" style="width: 25px;height: 25px;margin-left: 5px"></h2>
                </div>
                <div class="container">
                    <h2 id="mensajeErrorVerificar" style="font-family: 'Comic Sans MS',cursive;color: red;text-align: center"></h2>
                </div>
                <h3 style="color:white;font-family: 'Comic Sans MS', cursive">Ingrese su correo:</h3>
                <input id="correoInputVerificar" class="pla" type="text" style="border-radius: 10px;font-family: 'Comic Sans MS', cursive;" placeholder="Correo...">           
                <h3 style="color:white;font-family: 'Comic Sans MS', cursive">Selfie con alguna identificación:</h3>
                <div id='identificacion' class="container text-center mt-3">
                    <img id="identificacionImg" src="img/selfie .png" style="width: 50%;border-radius: 25px;object-fit:cover;margin-top: 8px;margin-bottom: 8px">

                    <div class="row justify-content-center">
                        <div id="cargar_identificacion" style="text-align: center;align-content: center;width: auto;margin-right: 3px;margin-top: 5px">
                            <label id="labelI" class="btn text-light">
                                <i class="btn text-light zoom" style="width: auto;border-color: #bcc4c3;margin-bottom: 10px;margin-right: 10px;font-family: 'Comic Sans MS';font-size: 20px;display: flex; align-items: center;">
                                    <img src="img/selfie .png" style="margin-right: 8px;width: 35px;height: auto">Selfie
                                </i>
                                <input type="file" id="file_identificacion" class="btn btn-block" style="display: none;" accept="image/*">
                            </label>
                        </div>
                    </div>
                </div>
                <div class="container justify-content-center row mt-5 mb-5" style="justify-content: center;text-align: center">
                    <button onclick="verificarUser()" id="verificarButton" class="btn text-light zoom" style="width: auto;border-color: #bcc4c3;margin-bottom: 10px;margin-right: 10px;font-family: 'Comic Sans MS', cursive;font-size: 20px;display: flex; align-items: center;">
                        <img src="img/checkedBlue.png" style="margin-right: 8px;width: 35px;height: auto">Solicitar Verificacion
                    </button>
                </div>

            </div>
        </div>
        <div id="div_deleteA" style="display: none">
            <div class="container">
                <h2 class="" style="color: white;font-family: 'Comic Sans MS', cursive;">Eliminar cuenta</h2>
                <ol>

                    <li class="" style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 22px">La eliminacion de la cuenta es una accion irreversible y permanente, por favor asegurese de:</li>
                    <li class="" style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 22px">Retirar todo su saldo</li>
                    <li class="" style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 22px">Retirar todas sus ganancias</li>
                    <li class="" style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 22px">*La eliminación de la cuenta se llevara a cabo al terminar el plazo de suscripción de sus seguidores</li>
                    <li class="" style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 22px">*Al eliminar su cuenta no podra reclamar ninguna de sus ganancias ni su saldo</li>
                    <li class="" style="color: white;font-family: 'Comic Sans MS', cursive;font-size: 22px">Para conocer mas sobre la eliminación de su cuenta por favor leer "Eliminacion de cuenta" de los terminos y condiciones</li>
                </ol>
                <h3 style="color:white;font-family: 'Comic Sans MS', cursive">Ingrese su correo:</h3>
                <input onclick="deleteMensageError()" id="correoDelete" class="pla" type="text" style="border-radius: 10px;font-family: 'Comic Sans MS', cursive;" placeholder="Correo...">
                <h2 id="errorCorreoDelete" style="color: red;font-family: 'Comic Sans MS', cursive;font-size: 15px"></h2>
                <div id="contraD" class="campo" style="max-width: 100%;justify-content: flex-start">
                    <h3 style="color:white;font-family: 'Comic Sans MS', cursive">Ingrese su contraseña:</h3>
                    <input onclick="deleteMensageError()" id="passW" type="password" class="pla"
                           placeholder="Ingrese su contraseña" style="border-radius: 10px;font-family: 'Comic Sans MS', cursive;display: none" >
                    <span><img onclick="mostrar()" id="show" class="zoom" src="img/mostrar.png" style="height: 26px"></span>
                    <h2 id="errorContraDelete" style="color: red;font-family: 'Comic Sans MS', cursive;font-size: 15px"></h2>
                </div>

            </div>
            <div class="container justify-content-center pt-2">
                <div class="row justify-content-center" style="justify-content: center">
                    <button onclick="eliminarCuenta()" class="btn text-light zoom" style="width: auto;border-color: #bcc4c3;margin-bottom: 10px;margin-right: 10px;font-family: 'Comic Sans MS', cursive;font-size: 20px;display: flex; align-items: center;">
                        <img src="img/delete.png" style="margin-right: 8px;width: 35px;height: auto">Eliminar cuenta
                    </button>

                </div>
                <h2 onclick="retirarC()" class="zoom" style="text-decoration: underline 3px #184c4c;text-align: center;font-family: 'Comic Sans MS', cursive;color: white">Retirar Coins</h2>
            </div>
        </div>




        <script src="script/cif.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet"/>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
        <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-app-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-auth-compat.js"></script>
        <script src="https://www.gstatic.com/firebasejs/9.1.3/firebase-compat.js"></script>

        <script>
                    var firebaseConfig = {
                        apiKey: "AIzaSyB9zjuIk3aupb9lxw4kdE10WELo3RflJP0",
                        authDomain: "enjoy-13d08.firebaseapp.com",
                        databaseURL: "https://enjoy-13d08-default-rtdb.firebaseio.com",
                        projectId: "enjoy-13d08",
                        storageBucket: "enjoy-13d08.appspot.com",
                        messagingSenderId: "259344011433",
                        appId: "1:259344011433:web:2766c0f29a97a74da5d9b8"
                    };
                    firebaseApp = firebase.initializeApp(firebaseConfig);
                    var auth = firebase.auth();
                    var fire = firebase.firestore();



        </script>
        <script>
            function retirarC() {
                location.href = 'Coins.html';
            }
            function eliminar() {
                location.reload();
            }
            $("#cerrar").click(function () {
                auth.signOut().then(function () {
                    window.location = "index.html";
                });
            });
            $("#cerrarS").click(function () {
                auth.signOut().then(function () {
                    window.location = "index.html";
                });
            });
            function deleteN(uid) {
                if (uid) {

                    var docref = fire.collection('IMAGENES').doc(uid);

                    docref.update({
                        new : firebase.firestore.FieldValue.delete()
                    }).then(function () {
                        var url = "notificaciones.html";

                        location.href = url;
                    });
                } else {

                    var url = "notificaciones.html";
                    location.href = url;
                }
            }
            function deleteM(uid) {
                if (uid) {
                    var docref = fire.collection('IMAGENES').doc(uid);
                    docref.update({
                        newM: firebase.firestore.FieldValue.delete()
                    }).then(function () {
                        var url = "bandejaEntrada.html";

                        location.href = url;
                    });


                } else {

                    var url = "bandejaEntrada.html";
                    location.href = url;
                }
            }
            function validarCaracteres() {
                document.getElementById("errorCaracteres").innerHTML = "";
                var presentacion = $("#presentation").val();
                var filtro = "<>";
                document.getElementById("errorCaracteres").innerHTML = '';
                for (var i = 0; i < presentacion.length; i++) {
                    if (filtro.indexOf(presentacion.charAt(i)) > -1) {
                        document.getElementById("errorCaracteres").innerHTML = '< ó > no son caracteres validos';
                    }
                }

                tamano = presentacion.length;
                document.getElementById("cantCaracteres").innerHTML = "";
                document.getElementById("cantCaracteres").innerHTML = "" + tamano + "/150";
                if (tamano > 150) {
                    document.getElementById("errorCaracteres").innerHTML = "*150 max";
                }

            }
            function suserrorSusM() {
                var errorSusM = document.getElementById("errorSusM");
                errorSusM.innerHTML = '';
            }
            function nameerrorName() {
                var errorName = document.getElementById("errorName");
                errorName.innerHTML = '';
                var errorNameG = document.getElementById("errorNameG");
                errorNameG.innerHTML = '';
            }
            function codigoInvitacionerror() {
                var errorName = document.getElementById("errorName");
                errorName.innerHTML = '';
                var errorNameG = document.getElementById("errorNameG");
                errorNameG.innerHTML = '';
            }
        </script>
        <script>
            function deleteMensageError() {
                var contaD = document.getElementById("contraD");
                if (contaD.childElementCount > 1) {
                    document.getElementById("errorContraDelete").innerHTML = '';
                    document.getElementById("errorCorreoDelete").innerHTML = '';
                } else {
                    document.getElementById("errorCorreoDelete").innerHTML = '';
                }
            }
            function mostrar() {
                var tipo = document.getElementById("passW");
                if (tipo.type === "password") {
                    tipo.type = "text";
                    $("#show").attr("src", "img/oculto.png");
                } else {
                    tipo.type = "password";
                    $("#show").attr("src", "img/mostrar.png");
                }
            }
            var div_editP = document.getElementById("div_EditP");
            var div_verificar = document.getElementById("div_verificar");
            var div_deleteA = document.getElementById("div_deleteA");
            $("#editP").click(function () {
                div_editP.style.display = "";
                div_verificar.style.display = "none";
                div_deleteA.style.display = "none";
                $("#editP").toggleClass("pestana");
                $("#verificar").removeClass("pestana");
                $("#deleteA").removeClass("pestana");
            });
            $("#verificar").click(function () {
                div_verificar.style.display = "";
                div_editP.style.display = "none";
                div_deleteA.style.display = "none";
                $("#verificar").toggleClass("pestana");
                $("#editP").removeClass("pestana");
                $("#deleteA").removeClass("pestana");
            });
            $("#deleteA").click(function () {
                div_deleteA.style.display = "";
                div_verificar.style.display = "none";
                div_editP.style.display = "none";
                $("#deleteA").toggleClass("pestana");
                $("#editP").removeClass("pestana");
                $("#verificar").removeClass("pestana");
            });
            var storageRef = firebase.storage().ref();
            var loaderMensaje = document.getElementById("loaderMensaje");
            auth.onAuthStateChanged(function (user) {
                if (user) {
                    var mail = user.email;
                    var encripta = cifrar(mail.toString());
                    var resultado = encripta.palabraEncriptada;
                    var queryImagenes = firebase.database().ref("Imagenes").orderByChild('correoI').equalTo(resultado).limitToFirst(1);
                    queryImagenes.on("child_added", function (s) {

                        $("#compdataPub").attr("value", "true");
                    });
                    var queryLike = firebase.database().ref("likes").orderByChild('correo').equalTo(resultado).limitToFirst(1);
                    queryLike.on("child_added", function (s) {

                        $("#compdatalikes").attr("value", "true");
                    });

                    var querybaseMensajeria = firebase.database().ref("baseMensajeria").orderByChild('correoM').equalTo(resultado).limitToFirst(1);
                    querybaseMensajeria.on("child_added", function (s) {

                        $("#compdataMensajeria").attr("value", "true");
                    });
                    var querybaseBandeja1 = firebase.database().ref("baseBandeja").orderByChild('correo1').equalTo(resultado).limitToFirst(1);
                    querybaseBandeja1.on("child_added", function (s) {

                        $("#compdatabandeja1").attr("value", "true");
                    });
                    var querybaseBandeja2 = firebase.database().ref("baseBandeja").orderByChild('correo2').equalTo(resultado).limitToFirst(1);
                    querybaseBandeja2.on("child_added", function (s) {

                        $("#compdatabandeja2").attr("value", "true");
                    });

                } else {
                    location.replace("index.html");
                }
            });
            $("#file_identificacion").change(function (e) {
                var mensajeErrorVerificar = document.getElementById("mensajeErrorVerificar");
                mensajeErrorVerificar.innerHTML = '';
                var ficheroVerificacion = document.getElementById("file_identificacion");
                if (ficheroVerificacion.files.length > 0 && ficheroVerificacion.files.length < 2) {
                    var tamanoMax = 12000000;
                    var archivo = ficheroVerificacion.files[0];
                    if (archivo.size > tamanoMax) {
                        const tamanioEnMb = tamanoMax / 1000000;
                        mensajeErrorVerificar.innerHTML = '';
                        mensajeErrorVerificar.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB por archivo';
                        window.location.href = "#divMEV";
                    } else {
                        let reader = new FileReader();
                        reader.readAsDataURL(e.target.files[0]);
                        reader.onload = function () {
                            let previewIden = document.getElementById('identificacionImg');
                            previewIden.src = reader.result;
                            previewIden.width = $("#identificacionImg").width();
                            previewIden.height = $("#identificacionImg").width();
                            previewIden.style.borderRadius = "400px";
                        };
                    }
                } else {
                    if (ficheroVerificacion.files.length === 0) {
                        mensajeErrorVerificar.innerHTML = '';
                        mensajeErrorVerificar.innerHTML = 'Aun no hay selfie';
                        window.location.href = "#divMEV";
                    } else {
                        location.reload();
                        mensajeErrorVerificar.innerHTML = '';
                        mensajeErrorVerificar.innerHTML = 'Solo puede Subir 1 archivo';
                        window.location.href = "#divMEV";
                    }
                }
            });
            function eliminarCuenta() {
                var contaD = document.getElementById("contraD");
                if (contaD.childElementCount > 1) {
                    var docKey = $("#key").val();
                    var correoDelete = $("#correoDelete").val();
                    var passW = $("#passW").val();
                    var errorContraDelete = document.getElementById("errorContraDelete");
                    var errorCorreoDelete = document.getElementById("errorCorreoDelete");
                    if (correoDelete.length > 0) {
                        if (passW.length > 0) {
                            var deleteAccount = {
                                deleteAccount: "delete"
                            };
                            var encriptaCD = cifrar(correoDelete.toString());
                            var correoDeleteE = encriptaCD.palabraEncriptada;
                            fire.collection("IMAGENES").where("mail", "==", correoDeleteE)
                                    .get()
                                    .then(function (querySnapshot) {
                                        querySnapshot.forEach(function (doc) {
                                            var publicaciones = doc.data();
                                            var contradeleteData = publicaciones.contra;
                                            var uidDATA = publicaciones.uid;
                                            var seguidores = publicaciones.contSeg;
                                            if (docKey === uidDATA) {
                                                if (contradeleteData === passW) {
                                                    fire.collection("IMAGENES").doc(docKey).update(deleteAccount).then(function () {
                                                        document.getElementById("div_deleteA").innerHTML = '';
                                                        $("#div_deleteA").append('<h2 style="color: white;font-family: Comic Sans MS, cursive;text-align: center">La solicitud de eliminacion esta en revisión</h2>');
                                                    });


                                                } else {
                                                    errorContraDelete.innerHTML = '*La contraseña no coincide con este usuario';
                                                }
                                            } else {
                                                errorCorreoDelete.innerHTML = '*Datos no coinciden';
                                            }
                                        });
                                    }).catch(function (error) {
                            });
                        } else {
                            errorContraDelete.innerHTML = '*Contraseña no puede quedar vacia';
                        }
                    } else {
                        errorCorreoDelete.innerHTML = '*Correo no puede quedar vacio';
                    }
                } else {
                    var docKey = $("#key").val();
                    var correoDelete = $("#correoDelete").val();
                    var errorCorreoDelete = document.getElementById("errorCorreoDelete");
                    if (correoDelete.length > 0) {
                        var deleteAccount = {
                            deleteAccount: "delete"
                        };
                        var encriptaCD = cifrar(correoDelete.toString());
                        var correoDeleteE = encriptaCD.palabraEncriptada;
                        fire.collection("IMAGENES").where("mail", "==", correoDeleteE)
                                .get()
                                .then(function (querySnapshot) {
                                    querySnapshot.forEach(function (doc) {
                                        var publicaciones = doc.data();
                                        var contraDeleteData = publicaciones.contra;
                                        uidDatas = publicaciones.uid;
                                        var seguidores = publicaciones.contSeg;
                                        if (uidDatas === docKey) {
                                            if (contraDeleteData) {
                                                errorCorreoDelete.innerHTML = '*Correo incorrecto';
                                            } else {
                                                if (parseInt(seguidores) > 0) {
                                                    fire.collection("IMAGENES").doc(docKey).update(deleteAccount).then(function () {
                                                        document.getElementById("div_deleteA").innerHTML = '';
                                                        $("#div_deleteA").append('<h2 style="color: white;font-family: Comic Sans MS, cursive;text-align: center">La solicitud de eliminacion esta en revisión</h2>');
                                                    });
                                                } else if (parseInt(seguidores) === 0) {

                                                } else if (seguidores === undefined) {

                                                }
                                                fire.collection("IMAGENES").doc(docKey).update(deleteAccount).then(function () {
                                                    location.reload();
                                                });
                                            }
                                        } else {
                                            errorCorreoDelete.innerHTML = '*Datos Incorrectos';
                                        }
                                    });
                                }).catch(function (error) {
                        });
                    } else {
                        errorCorreoDelete.innerHTML = '*Correo no puede quedar vacio';
                    }
                }
            }
            function onKeyUp(event, string) {
                var filtro = "<>";
                document.getElementById("errorName").innerHTML = '';
                for (var i = 0; i < string.length; i++) {
                    if (filtro.indexOf(string.charAt(i)) > -1) {
                        document.getElementById("errorName").innerHTML = '< ó > no son caracteres validos';
                    }
                }
                var filtroLetra = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890_-';
                for (var i = 0; i < string.length; i++) {
                    if (filtroLetra.indexOf(string.charAt(i)) === -1) {
                        document.getElementById("errorName").innerHTML = 'caracter no valido';
                    }
                }
                var keycode = event.keyCode;

                if (keycode == '32') {
                    var errorName = document.getElementById("errorName");
                    errorName.innerHTML = '*Nombre no puede contener espacios en blanco, puede remplazar con "_"';
                    var errorNameG = document.getElementById("errorNameG");
                    errorNameG.innerHTML = '*Nombre no puede contener espacios en blanco, puede remplazar con "_"';
                }
                if (keycode == '8') {
                    nameerrorName();
                }
                if (keycode == '192') {
                    var errorName = document.getElementById("errorName");
                    errorName.innerHTML = '*Nombre no puede contener el caracter Ñ puede remplazar con N';

                }
                var nombre = $("#nameForm").val();
                tamanoN = nombre.length;
                document.getElementById("cantCaracteresN").innerHTML = "";
                document.getElementById("cantCaracteresN").innerHTML = "" + tamanoN + "/25";

                if (tamanoN > 25) {
                    document.getElementById("errorName").innerHTML = "";
                    document.getElementById("errorName").innerHTML = "*25 max";
                }
            }
            function compIMG() {
                var codigoInvitacion = $("#codigoInvitacionInput").val();
                var valcodigoInvitacion = codigoInvitacion.length;
                if (valcodigoInvitacion > 0 && valcodigoInvitacion <= 6) {
                    nameC = $("#nameForm").val();
                    var data = {
                        name: nameC,
                        codigoI:codigoInvitacion
                    };
                    firebase.firestore().collection('CODIGOS').doc().set(data).then(function () {
                        var mensajeErrorfile = document.getElementById("errorNameG");
                        mensajeErrorfile.innerHTML = '';
                        var fileP = document.getElementById("fileP");
                        var file = document.getElementById("file");
                        var tamanoMax = 12000000;
                        if (file.files.length > 0 && file.files.length < 2) {
                            var archivo = file.files[0];
                            if (archivo.size > tamanoMax) {
                                const tamanioEnMb = tamanoMax / 1000000;
                                mensajeErrorfile.innerHTML = '';
                                mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en profile Photo';
                                window.location.href = "#portada";
                            } else {
                                if (fileP.files.length > 0 && fileP.files.length < 2) {
                                    var archivo2 = fileP.files[0];
                                    if (archivo2.size > tamanoMax) {
                                        const tamanioEnMb = tamanoMax / 1000000;
                                        mensajeErrorfile.innerHTML = '';
                                        mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en Cover Photo';
                                        window.location.href = "#portada";
                                    } else {
                                        compName();
                                    }
                                } else {
                                    compName();
                                }
                            }
                        } else {
                            if (fileP.files.length > 0 && fileP.files.length < 2) {
                                var archivo2 = fileP.files[0];
                                if (archivo2.size > tamanoMax) {
                                    const tamanioEnMb = tamanoMax / 1000000;
                                    mensajeErrorfile.innerHTML = '';
                                    mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en cover Photo';
                                    window.location.href = "#portada";
                                } else {
                                    compName();
                                }
                            } else {
                                compName();
                            }

                        }
                    });

                } else {
                    var mensajeErrorfile = document.getElementById("errorNameG");
                    mensajeErrorfile.innerHTML = '';
                    var fileP = document.getElementById("fileP");
                    var file = document.getElementById("file");
                    var tamanoMax = 12000000;
                    if (file.files.length > 0 && file.files.length < 2) {
                        var archivo = file.files[0];
                        if (archivo.size > tamanoMax) {
                            const tamanioEnMb = tamanoMax / 1000000;
                            mensajeErrorfile.innerHTML = '';
                            mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en profile Photo';
                            window.location.href = "#portada";
                        } else {
                            if (fileP.files.length > 0 && fileP.files.length < 2) {
                                var archivo2 = fileP.files[0];
                                if (archivo2.size > tamanoMax) {
                                    const tamanioEnMb = tamanoMax / 1000000;
                                    mensajeErrorfile.innerHTML = '';
                                    mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en Cover Photo';
                                    window.location.href = "#portada";
                                } else {
                                    compName();
                                }
                            } else {
                                compName();
                            }
                        }
                    } else {
                        if (fileP.files.length > 0 && fileP.files.length < 2) {
                            var archivo2 = fileP.files[0];
                            if (archivo2.size > tamanoMax) {
                                const tamanioEnMb = tamanoMax / 1000000;
                                mensajeErrorfile.innerHTML = '';
                                mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en cover Photo';
                                window.location.href = "#portada";
                            } else {
                                compName();
                            }
                        } else {
                            compName();
                        }

                    }
                }

            }
            function compName() {
                var presentacion = $("#presentation").val();
                document.getElementById("errorCaracteres").innerHTML = "";


                var filtroLetra2 = ["(", ")", "$", "°", "|", "[", "]", "<", ">", "¬"];
                if (presentacion.includes(filtroLetra2[0])) {
                    document.getElementById("errorCaracteres").innerHTML = '"(" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[1])) {
                    document.getElementById("errorCaracteres").innerHTML = '")" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[2])) {
                    document.getElementById("errorCaracteres").innerHTML = '"$" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[3])) {
                    document.getElementById("errorCaracteres").innerHTML = '"°" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[4])) {
                    document.getElementById("errorCaracteres").innerHTML = '"|" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[5])) {
                    document.getElementById("errorCaracteres").innerHTML = '"[" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[6])) {
                    document.getElementById("errorCaracteres").innerHTML = '"]" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[7])) {
                    document.getElementById("errorCaracteres").innerHTML = '"<" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[8])) {
                    document.getElementById("errorCaracteres").innerHTML = '">" no es un caracter valido';
                } else if (presentacion.includes(filtroLetra2[9])) {
                    document.getElementById("errorCaracteres").innerHTML = '"¬" no es un caracter valido';
                } else {
                    tamano = presentacion.length;
                    if (tamano > 150) {
                        document.getElementById("errorCaracteres").innerHTML = "*150 max";
                        window.location.href = "#susM";
                    } else {
                        var nombreC = "false";
                        nameC = $("#nameForm").val();
                        var filtroLetraNombre = /[A-Za-z0-9_-]/;
                        for (var i = 0; i < nameC.length; i++) {
                            if (filtroLetraNombre.test(nameC.charAt(i))) {
                                if (i === nameC.length - 1) {
                                    var p1 = document.getElementById("nameForm").value;
                                    var noValido = /\s/;
                                    var validacionN = /ñ/;
                                    if (validacionN.test(p1)) {
                                        window.location.href = "#btnSC";
                                        var errorName = document.getElementById("errorName");
                                        errorName.innerHTML = '*Nombre no puede contener el caracter Ñ puede remplazar con N';
                                        var errorNameG = document.getElementById("errorNameG");
                                        errorNameG.innerHTML = '*Nombre no puede contener el caracter Ñ puede remplazar con N';
                                    } else {
                                        if (noValido.test(p1)) {
                                            window.location.href = "#btnSC";
                                            var errorName = document.getElementById("errorName");
                                            errorName.innerHTML = '*El nombre no puede contener espacios en blanco';
                                            var errorNameG = document.getElementById("errorNameG");
                                            errorNameG.innerHTML = '*El nombre no puede contener espacios en blanco';
                                        } else {
                                            tamanoNombre = nameC.length;
                                            if (tamanoNombre > 25) {
                                                window.location.href = "#btnSC";
                                                var errorName = document.getElementById("errorName");
                                                errorName.innerHTML = '*25 max';
                                            } else {
                                                fire.collection("IMAGENES").where("nombre", "==", nameC)
                                                        .get()
                                                        .then(function (querySnapshot) {
                                                            querySnapshot.forEach(function (doc) {
                                                                var publicaciones = doc.data();
                                                                nombreC = publicaciones.nombre;
                                                                correo = publicaciones.mail;

                                                            });
                                                            if (nombreC === "false") {
                                                                compContra();
                                                            } else if (nombreC !== "false") {
                                                                auth.onAuthStateChanged(function (user) {
                                                                    if (user) {
                                                                        var mail = user.email;
                                                                        var encripta = cifrar(mail.toString());
                                                                        var correoA = encripta.palabraEncriptada;
                                                                        if (correoA === correo) {
                                                                            compContra();
                                                                        } else if (correoA !== correo) {
                                                                            var errorName = document.getElementById("errorName");
                                                                            errorName.innerHTML = '*Este nombre ya esta en uso';
                                                                            var errorNameG = document.getElementById("errorNameG");
                                                                            errorNameG.innerHTML = '*Este nombre ya esta en uso';
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                            }
                                        }
                                    }
                                }
                            } else {
                                var errorName = document.getElementById("errorName");
                                errorName.innerHTML = '*Nombre solo acepta Letras, Números, _ y - ';
                                window.location.href = "#btnSC";

                                i = nameC.length - 1;
                            }
                        }
                    }

                }
            }

            function compContra() {
                var validacion = /</;
                var validacion2 = />/;
                var nameInput = $("#nameForm").val();
                if (validacion.test(nameInput)) {
                    document.getElementById("errorName").innerHTML = '"<" no es un caracter valido';
                    window.location.href = "#cantCaracteresN";
                } else {
                    if (validacion2.test(nameInput)) {
                        document.getElementById("errorName").innerHTML = '">" no es un caracter valido';
                        window.location.href = "#cantCaracteresN";
                    } else {
                        if ($("#nameForm").val().length > 0) {

                            susMCaracter = $("#susM").val();
                            if (validacion.test(susMCaracter)) {
                                document.getElementById("errorSusM").innerHTML = '"<" no es un caracter valido';
                                window.location.href = "#nameForm";
                            } else {
                                if (validacion2.test(susMCaracter)) {
                                    document.getElementById("errorSusM").innerHTML = '">" no es un caracter valido';
                                    window.location.href = "#nameForm";
                                } else {
                                    if ($("#susM").val() > 4) {

                                        descCaracter = $("#presentation").val();
                                        if (validacion.test(descCaracter)) {
                                            document.getElementById("errorCaracteres").innerHTML = '"<" no es un caracter valido';
                                            window.location.href = "#susM";
                                        } else {
                                            if (validacion2.test(descCaracter)) {
                                                document.getElementById("errorCaracteres").innerHTML = '">" no es un caracter valido';
                                                window.location.href = "#susM";
                                            } else {
                                                var element = document.getElementById("loader");
                                                element.style.display = 'flex';
                                                element.classList.toggle("loader");
                                                rel();
                                            }
                                        }
                                    } else {
                                        var errorSusM = document.getElementById("errorSusM");
                                        errorSusM.innerHTML = 'La suscripcion debe ser minimo de 5 USD';
                                        window.location.href = "#nameForm";
                                    }

                                }
                            }
                        } else {
                            var errorName = document.getElementById("errorName");
                            errorName.innerHTML = '*Nombre no puede quedar vacio';
                            window.location.href = "#cantCaracteresN";

                            var errorNameG = document.getElementById("errorNameG");
                            errorNameG.innerHTML = '*Nombre no puede quedar vacio';
                            window.location.href = "#cantCaracteresN";
                        }
                    }
                }
                if (validacion.test(nameInput)) {
                    document.getElementById("errorName").innerHTML = '"<" no es un caracter valido';
                    window.location.href = "#cantCaracteresN"
                } else {
                    if (validacion2.test(nameInput)) {
                        document.getElementById("errorName").innerHTML = '">" no es un caracter valido'
                        window.location.href = "#cantCaracteresN"
                    } else {
                    }
                }


            }
            function rel() {
                var docR = $("#key").val();
                var fichero = document.getElementById("file");
                var fichero2 = document.getElementById("fileP");
                if (fichero.files.length > 0) {
                    if (fichero2.files.length > 0) {
                        recuperarPortadaImg();
                    } else
                    if (fichero2.files.length === 0) {
                        auth.onAuthStateChanged(function (user) {
                            if (user) {
                                var mail = user.email;
                                var encripta = cifrar(mail.toString());
                                var correo = encripta.palabraEncriptada;

                                fire.collection("IMAGENES").where("mail", "==", correo)
                                        .get()
                                        .then(function (querySnapshot) {
                                            querySnapshot.forEach(function (doc) {
                                                var fichero = document.getElementById("file");
                                                var publicaciones = doc.data();
                                                var keyStorage = publicaciones.keyStorage;
                                                if (keyStorage) {
                                                    var desertRef = storageRef.child('imagenes/' + keyStorage + "IMGSETTINGS");
                                                    tamanoFichero = fichero.files.length;
                                                    var canvas = document.createElement('canvas');
                                                    var MAX_WIDTH = 950;
                                                    img = fichero.files[0];
                                                    var _URL = window.URL || window.webkitURL;
                                                    var imageCan = new Image();
                                                    imageCan.src = _URL.createObjectURL(img);
                                                    imageCan.onload = function () {
                                                        var ancho = imageCan.width;
                                                        var alto = imageCan.height;
                                                        calc = ancho / alto;
                                                        if (ancho > MAX_WIDTH) {
                                                            ancho = MAX_WIDTH;
                                                            alto = ancho / calc;
                                                        }
                                                        canvas.width = ancho;
                                                        canvas.height = alto;
                                                        var ctx = canvas.getContext("2d");
                                                        ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                        canvas.toBlob((blob) => {
                                                            let file = new File([blob], "" + keyStorage + ".jpg", {type: "image/jpeg"});
                                                            var uploadTask = desertRef.put(file);
                                                            uploadTask.on('state_changed', function (snapshot) {
                                                                var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                                loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                                switch (snapshot.state) {
                                                                    case firebase.storage.TaskState.PAUSED:
                                                                        loaderMensaje.innerHTML = 'Error la carga se ha pausado';
                                                                        break;
                                                                    case firebase.storage.TaskState.RUNNING:
                                                                        loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                                        break;
                                                                }
                                                            }, function (error) {
                                                            }, function () {
                                                                uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                                    actualizarProfile(downloadURL, keyStorage);
                                                                });
                                                            });
                                                        }, 'image/jpeg');
                                                    };
                                                } else {
                                                    var palabra = [];
                                                    var valores = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",
                                                        "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d",
                                                        "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t",
                                                        "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
                                                        "-", "_"];
                                                    var numero = 8;
                                                    var numeroAleatorio;
                                                    for (var i = 0; i < numero; i++) {
                                                        numeroAleatorio = parseInt(Math.random() * valores.length);
                                                        var resultado = valores[numeroAleatorio];

                                                        palabra.push(resultado);
                                                        var palabraResultante = palabra.join('');
                                                    }
                                                    tamanoFichero = fichero.files.length;
                                                    var canvas = document.createElement('canvas');
                                                    var MAX_WIDTH = 950;
                                                    img = fichero.files[0];
                                                    var _URL = window.URL || window.webkitURL;
                                                    var imageCan = new Image();
                                                    imageCan.src = _URL.createObjectURL(img);
                                                    imageCan.onload = function () {
                                                        var ancho = imageCan.width;
                                                        var alto = imageCan.height;
                                                        calc = ancho / alto;
                                                        if (ancho > MAX_WIDTH) {
                                                            ancho = MAX_WIDTH;
                                                            alto = ancho / calc;
                                                        }
                                                        canvas.width = ancho;
                                                        canvas.height = alto;
                                                        var ctx = canvas.getContext("2d");
                                                        ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                        canvas.toBlob((blob) => {
                                                            let file = new File([blob], "" + palabraResultante + ".jpg", {type: "image/jpeg"});
                                                            var uploadTask = storageRef.child('imagenes/' + palabraResultante + "IMGSETTINGS").put(file);
                                                            uploadTask.on('state_changed', function (snapshot) {
                                                                var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                                loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                                switch (snapshot.state) {
                                                                    case firebase.storage.TaskState.PAUSED:
                                                                        loaderMensaje.innerHTML = 'Error la carga se ha pausado';
                                                                        break;
                                                                    case firebase.storage.TaskState.RUNNING:
                                                                        loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                                        break;
                                                                }
                                                            }, function (error) {

                                                            }, function () {
                                                                uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                                    actualizarProfile(downloadURL, palabraResultante);

                                                                });
                                                            });
                                                        }, 'image/jpeg');
                                                    };

                                                }
                                            });
                                        });
                            } else {
                                location.replace("index.html");
                            }
                        });
                    }
                } else if (fichero.files.length === 0) {

                    if (fichero2.files.length > 0) {
                        auth.onAuthStateChanged(function (user) {
                            if (user) {
                                var mail = user.email;
                                var encripta = cifrar(mail.toString());
                                var correo = encripta.palabraEncriptada;
                                fire.collection("IMAGENES").where("mail", "==", correo)
                                        .get()
                                        .then(function (querySnapshot) {
                                            querySnapshot.forEach(function (doc) {
                                                var fichero2 = document.getElementById("fileP");
                                                var publicaciones = doc.data();
                                                var keyStorageP = publicaciones.keyStoragePortada;
                                                if (keyStorageP) {
                                                    var desertRef = storageRef.child('imagenes/' + keyStorageP + "IMGSETTINGS");
                                                    tamanoFichero = fichero2.files.length;
                                                    var canvas = document.createElement('canvas');
                                                    var MAX_WIDTH = 950;
                                                    img = fichero2.files[0];
                                                    var _URL = window.URL || window.webkitURL;
                                                    var imageCan = new Image();
                                                    imageCan.src = _URL.createObjectURL(img);
                                                    imageCan.onload = function () {
                                                        var ancho = imageCan.width;
                                                        var alto = imageCan.height;
                                                        calc = ancho / alto;
                                                        if (ancho > MAX_WIDTH) {
                                                            ancho = MAX_WIDTH;
                                                            alto = ancho / calc;
                                                        }
                                                        canvas.width = ancho;
                                                        canvas.height = alto;
                                                        var ctx = canvas.getContext("2d");
                                                        ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                        canvas.toBlob((blob) => {
                                                            let file = new File([blob], "" + keyStorageP + ".jpg", {type: "image/jpeg"});
                                                            var uploadTask = desertRef.put(file);
                                                            uploadTask.on('state_changed', function (snapshot) {
                                                                var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                                loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                                switch (snapshot.state) {
                                                                    case firebase.storage.TaskState.PAUSED:
                                                                        loaderMensaje.innerHTML = 'Error la carga se ha pausado';
                                                                        break;
                                                                    case firebase.storage.TaskState.RUNNING:
                                                                        loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                                        break;
                                                                }
                                                            }, function (error) {
                                                            }, function () {
                                                                uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                                    actualizarPortada(downloadURL, keyStorageP);
                                                                });
                                                            });
                                                        }, 'image/jpeg');
                                                    };
                                                } else {
                                                    var palabra = [];
                                                    var valores = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",
                                                        "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d",
                                                        "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t",
                                                        "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
                                                        "-", "_"];
                                                    var numero = 8;
                                                    var numeroAleatorio;
                                                    for (var i = 0; i < numero; i++) {
                                                        numeroAleatorio = parseInt(Math.random() * valores.length);
                                                        var resultado = valores[numeroAleatorio];
                                                        palabra.push(resultado);
                                                        var palabraResultante = palabra.join('');
                                                    }
                                                    tamanoFichero = fichero2.files.length;
                                                    var canvas = document.createElement('canvas');
                                                    var MAX_WIDTH = 950;
                                                    img = fichero2.files[0];
                                                    var _URL = window.URL || window.webkitURL;
                                                    var imageCan = new Image();
                                                    imageCan.src = _URL.createObjectURL(img);
                                                    imageCan.onload = function () {
                                                        var ancho = imageCan.width;
                                                        var alto = imageCan.height;
                                                        calc = ancho / alto;
                                                        if (ancho > MAX_WIDTH) {
                                                            ancho = MAX_WIDTH;
                                                            alto = ancho / calc;
                                                        }
                                                        canvas.width = ancho;
                                                        canvas.height = alto;
                                                        var ctx = canvas.getContext("2d");
                                                        ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                        canvas.toBlob((blob) => {
                                                            let file = new File([blob], "" + palabraResultante + ".jpg", {type: "image/jpeg"});
                                                            var uploadTask = storageRef.child('imagenes/' + palabraResultante + "IMGSETTINGS").put(file);
                                                            uploadTask.on('state_changed', function (snapshot) {
                                                                var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                                loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                                switch (snapshot.state) {
                                                                    case firebase.storage.TaskState.PAUSED:
                                                                        loaderMensaje.innerHTML = 'Error la carga se ha pausado';
                                                                        break;
                                                                    case firebase.storage.TaskState.RUNNING:
                                                                        loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                                        break;
                                                                }
                                                            }, function (error) {
                                                            }, function () {
                                                                uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                                    actualizarPortada(downloadURL, palabraResultante);

                                                                });
                                                            });
                                                        }, 'image/jpeg');
                                                    };
                                                }
                                            });
                                        });
                            } else {
                                location.replace("index.html");
                            }
                        });
                    } else
                    if (fichero2.files.length === 0) {

                        actualizarData();
                    }
                }
            }

            function recuperarPortadaImg() {
                auth.onAuthStateChanged(function (user) {
                    if (user) {
                        var mail = user.email;
                        var encripta = cifrar(mail.toString());
                        var correo = encripta.palabraEncriptada;
                        fire.collection("IMAGENES").where("mail", "==", correo)
                                .get()
                                .then(function (querySnapshot) {
                                    querySnapshot.forEach(function (doc) {
                                        var fichero2 = document.getElementById("fileP");
                                        var publicaciones = doc.data();
                                        var keyStorageP = publicaciones.keyStoragePortada;
                                        if (keyStorageP) {
                                            var desertRef = storageRef.child('imagenes/' + keyStorageP + "IMGSETTINGS");
                                            tamanoFichero = fichero2.files.length;
                                            var canvas = document.createElement('canvas');
                                            var MAX_WIDTH = 950;
                                            img = fichero2.files[0];
                                            var _URL = window.URL || window.webkitURL;
                                            var imageCan = new Image();
                                            imageCan.src = _URL.createObjectURL(img);
                                            imageCan.onload = function () {
                                                var ancho = imageCan.width;
                                                var alto = imageCan.height;
                                                calc = ancho / alto;
                                                if (ancho > MAX_WIDTH) {
                                                    ancho = MAX_WIDTH;
                                                    alto = ancho / calc;
                                                }
                                                canvas.width = ancho;
                                                canvas.height = alto;
                                                var ctx = canvas.getContext("2d");
                                                ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                canvas.toBlob((blob) => {
                                                    let file = new File([blob], "" + keyStorageP + ".jpg", {type: "image/jpeg"});
                                                    var uploadTask = desertRef.put(file);
                                                    uploadTask.on('state_changed', function (snapshot) {
                                                        var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                        loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                        switch (snapshot.state) {
                                                            case firebase.storage.TaskState.PAUSED:
                                                                loaderMensaje.innerHTML = 'Error la carga se ha detenido';
                                                                break;
                                                            case firebase.storage.TaskState.RUNNING:
                                                                loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                                break;
                                                        }
                                                    }, function (error) {
                                                    }, function () {
                                                        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                            recPerfil_portada(downloadURL, keyStorageP);
                                                        });
                                                    });
                                                }, 'image/jpeg');
                                            };




                                        } else {
                                            var palabra = [];
                                            var valores = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",
                                                "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d",
                                                "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t",
                                                "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
                                                "-", "_"];
                                            var numero = 8;
                                            var numeroAleatorio;
                                            for (var i = 0; i < numero; i++) {
                                                numeroAleatorio = parseInt(Math.random() * valores.length);
                                                var resultado = valores[numeroAleatorio];

                                                palabra.push(resultado);
                                                var palabraResultante = palabra.join('');
                                            }
                                            tamanoFichero = fichero2.files.length;
                                            var canvas = document.createElement('canvas');
                                            var MAX_WIDTH = 950;
                                            img = fichero2.files[0];
                                            var _URL = window.URL || window.webkitURL;
                                            var imageCan = new Image();
                                            imageCan.src = _URL.createObjectURL(img);
                                            imageCan.onload = function () {
                                                var ancho = imageCan.width;
                                                var alto = imageCan.height;
                                                calc = ancho / alto;
                                                if (ancho > MAX_WIDTH) {
                                                    ancho = MAX_WIDTH;
                                                    alto = ancho / calc;
                                                }
                                                canvas.width = ancho;
                                                canvas.height = alto;
                                                var ctx = canvas.getContext("2d");
                                                ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                canvas.toBlob((blob) => {
                                                    let file = new File([blob], "" + palabraResultante + ".jpg", {type: "image/jpeg"});
                                                    var uploadTask = storageRef.child('imagenes/' + palabraResultante + "IMGSETTINGS").put(file);
                                                    uploadTask.on('state_changed', function (snapshot) {
                                                        var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                        loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                        switch (snapshot.state) {
                                                            case firebase.storage.TaskState.PAUSED:
                                                                loaderMensaje.innerHTML = 'Error la carga se ha detenido';
                                                                break;
                                                            case firebase.storage.TaskState.RUNNING:
                                                                loaderMensaje.innerHTML = 'Subiendo foto de Portada ' + progress + '% por favor espere...';
                                                                break;
                                                        }
                                                    }, function (error) {
                                                    }, function () {
                                                        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                            recPerfil_portada(downloadURL, palabraResultante);
                                                        });
                                                    });
                                                }, 'image/jpeg');
                                            };




                                        }
                                    });
                                });
                    } else {
                        location.replace("index.html");
                    }
                });
            }

            function recPerfil_portada(downloadUrlPortada, keyPortada) {
                auth.onAuthStateChanged(function (user) {
                    if (user) {
                        var mail = user.email;
                        var encripta = cifrar(mail.toString());
                        var correo = encripta.palabraEncriptada;
                        fire.collection("IMAGENES").where("mail", "==", correo)
                                .get()
                                .then(function (querySnapshot) {
                                    querySnapshot.forEach(function (doc) {
                                        var fichero = document.getElementById("file");
                                        var publicaciones = doc.data();

                                        var keyStorage = publicaciones.keyStorage;
                                        if (keyStorage) {
                                            var desertRef = storageRef.child('imagenes/' + keyStorage + "IMGSETTINGS");
                                            tamanoFichero = fichero.files.length;
                                            var canvas = document.createElement('canvas');
                                            var MAX_WIDTH = 950;
                                            img = fichero.files[0];
                                            var _URL = window.URL || window.webkitURL;
                                            var imageCan = new Image();
                                            imageCan.src = _URL.createObjectURL(img);
                                            imageCan.onload = function () {
                                                var ancho = imageCan.width;
                                                var alto = imageCan.height;
                                                calc = ancho / alto;
                                                if (ancho > MAX_WIDTH) {
                                                    ancho = MAX_WIDTH;
                                                    alto = ancho / calc;
                                                }
                                                canvas.width = ancho;
                                                canvas.height = alto;
                                                var ctx = canvas.getContext("2d");
                                                ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                canvas.toBlob((blob) => {
                                                    let file = new File([blob], "" + keyStorage + ".jpg", {type: "image/jpeg"});
                                                    var uploadTask = desertRef.put(file);
                                                    uploadTask.on('state_changed', function (snapshot) {
                                                        var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                        loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                        switch (snapshot.state) {
                                                            case firebase.storage.TaskState.PAUSED:
                                                                loaderMensaje.innerHTML = 'Error la carga se ha detenido';
                                                                break;
                                                            case firebase.storage.TaskState.RUNNING:
                                                                loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                                break;
                                                        }
                                                    }, function (error) {
                                                    }, function () {
                                                        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                            actualizarProfile_Portada(downloadURL, keyStorage, downloadUrlPortada, keyPortada);
                                                        });
                                                    });
                                                }, 'image/jpeg');
                                            };
                                        } else {
                                            var palabra = [];
                                            var valores = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N",
                                                "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d",
                                                "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t",
                                                "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9",
                                                "-", "_"];
                                            var numero = 8;
                                            var numeroAleatorio;
                                            for (var i = 0; i < numero; i++) {
                                                numeroAleatorio = parseInt(Math.random() * valores.length);
                                                var resultado = valores[numeroAleatorio];
                                                palabra.push(resultado);
                                                var palabraResultante = palabra.join('');
                                            }
                                            tamanoFichero = fichero.files.length;
                                            var canvas = document.createElement('canvas');
                                            var MAX_WIDTH = 950;
                                            img = fichero.files[0];
                                            var _URL = window.URL || window.webkitURL;
                                            var imageCan = new Image();
                                            imageCan.src = _URL.createObjectURL(img);
                                            imageCan.onload = function () {
                                                var ancho = imageCan.width;
                                                var alto = imageCan.height;
                                                calc = ancho / alto;
                                                if (ancho > MAX_WIDTH) {
                                                    ancho = MAX_WIDTH;
                                                    alto = ancho / calc;
                                                }
                                                canvas.width = ancho;
                                                canvas.height = alto;
                                                var ctx = canvas.getContext("2d");
                                                ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                canvas.toBlob((blob) => {
                                                    let file = new File([blob], "" + palabraResultante + ".jpg", {type: "image/jpeg"});
                                                    var uploadTask = storageRef.child('imagenes/' + palabraResultante + "IMGSETTINGS").put(file);
                                                    uploadTask.on('state_changed', function (snapshot) {
                                                        var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                        loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                        switch (snapshot.state) {
                                                            case firebase.storage.TaskState.PAUSED:
                                                                loaderMensaje.innerHTML = 'Error la carga se ha detenido';
                                                                break;
                                                            case firebase.storage.TaskState.RUNNING:
                                                                loaderMensaje.innerHTML = 'Subiendo foto de perfil ' + progress + '% por favor espere...';
                                                                break;
                                                        }
                                                    }, function (error) {
                                                    }, function () {
                                                        uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                            actualizarProfile_Portada(downloadURL, palabraResultante, downloadUrlPortada, keyPortada);

                                                        });
                                                    });
                                                }, 'image/jpeg');
                                            };
                                        }
                                    });
                                });
                    } else {
                        location.replace("index.html");
                    }
                });
            }
            function actualizarData() {
                auth.onAuthStateChanged(function (user) {
                    if (user) {
                        var mail = user.email;
                        var encripta = cifrar(mail.toString());
                        var resultado = encripta.palabraEncriptada;
                        var compdataImagen = $("#compdataPub").val();
                        var compdataLike = $("#compdatalikes").val();
                        var compdataMensajeria = $("#compdataMensajeria").val();
                        var compdatabandeja1 = $("#compdatabandeja1").val();
                        var compdatabandeja2 = $("#compdatabandeja2").val();
                        var loaderMensaje = document.getElementById("loaderMensaje");
                        var docR = $("#key").val();
                        var name = $("#nameForm").val();
                        var susM = $("#susM").val();
                        susM = parseInt(susM);
                        var contraU = $("#contraU").val();
                        var presentacion = $("#presentation").val();
                        if (document.querySelector('#contra').childElementCount > 1) {
                            var datanueva = {
                                nombre: name,
                                susM: susM,
                                contra: contraU,
                                presentacion: presentacion
                            };
                        } else {
                            var datanueva = {
                                nombre: name,
                                susM: susM,
                                presentacion: presentacion
                            };
                        }
                        fire.collection("IMAGENES").doc(docR).update(datanueva).then(function () {
                            if (compdataImagen === "true") {
                                loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                var ref = firebase.database().ref("Imagenes");
                                ref.on("child_added", function (s) {
                                    userdata = s.val();
                                    if (userdata.correoI === resultado) {
                                        var keys = s.key;
                                        var newData = {
                                            nombreU: name
                                        };
                                        var refTab = firebase.database().ref("Imagenes/").child(keys);
                                        refTab.update(newData).then(function () {
                                            if (compdataLike === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                                var reflike = firebase.database().ref("likes");
                                                reflike.on("child_added", function (s) {
                                                    userdatalike = s.val();
                                                    if (userdatalike.correo === resultado) {
                                                        var keyslike = s.key;
                                                        var newDatalike = {
                                                            nombreU: name
                                                        };
                                                        var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                        refTabL.update(newDatalike).then(function () {
                                                            if (compdataMensajeria === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refMensajeria = firebase.database().ref("baseMensajeria");
                                                                refMensajeria.on("child_added", function (s) {
                                                                    userdataMensajeria = s.val();
                                                                    if (userdataMensajeria.correoM === resultado) {
                                                                        var keysMensajeria = s.key;
                                                                        var newDataMensajeria = {
                                                                            nombreM: name
                                                                        };
                                                                        var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                        refTabM.update(newDataMensajeria).then(function () {

                                                                            if (compdatabandeja1 === "true") {
                                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                                refBandeja.on("child_added", function (s) {
                                                                                    userdataBandeja = s.val();
                                                                                    if (userdataBandeja.correo1 === resultado) {

                                                                                        var keysBandeja = s.key;
                                                                                        var newDataBandeja = {
                                                                                            nombre1: name
                                                                                        };
                                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                                            if (compdatabandeja2 === "true") {

                                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                                refBandeja2.on("child_added", function (s) {
                                                                                                    userdataBandeja2 = s.val();
                                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                                        var keysBandeja2 = s.key;
                                                                                                        var newDataBandeja2 = {
                                                                                                            nombre2: name
                                                                                                        };
                                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                                            location.replace("profile.html");
                                                                                                        });
                                                                                                    }
                                                                                                });
                                                                                            } else {

                                                                                                location.replace("profile.html");
                                                                                            }
                                                                                        });
                                                                                    }
                                                                                });

                                                                            } else {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            }
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                if (compdatabandeja1 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {
                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {
                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    }
                                                });
                                            } else {

                                                if (compdataMensajeria === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                    refMensajeria.on("child_added", function (s) {
                                                        userdataMensajeria = s.val();
                                                        if (userdataMensajeria.correoM === resultado) {
                                                            var keysMensajeria = s.key;
                                                            var newDataMensajeria = {
                                                                nombreM: name
                                                            };
                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                if (compdatabandeja1 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {
                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdatabandeja1 === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                        refBandeja.on("child_added", function (s) {
                                                            userdataBandeja = s.val();
                                                            if (userdataBandeja.correo1 === resultado) {
                                                                var keysBandeja = s.key;
                                                                var newDataBandeja = {
                                                                    nombre1: name
                                                                };
                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                refTabB.update(newDataBandeja).then(function () {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                });
                                                            }
                                                        });

                                                    } else {

                                                        if (compdatabandeja2 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                            refBandeja2.on("child_added", function (s) {
                                                                userdataBandeja2 = s.val();
                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                    var keysBandeja2 = s.key;
                                                                    var newDataBandeja2 = {
                                                                        nombre2: name
                                                                    };
                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                        location.replace("profile.html");
                                                                    });
                                                                }
                                                            });
                                                        } else {
                                                            location.replace("profile.html");
                                                        }
                                                    }
                                                }
                                            }
                                        });
                                    }
                                });
                            } else {

                                if (compdataLike === "true") {

                                    var reflike = firebase.database().ref("likes");
                                    reflike.on("child_added", function (s) {
                                        userdatalike = s.val();
                                        if (userdatalike.correo === resultado) {
                                            var keyslike = s.key;
                                            var newDatalike = {
                                                nombreU: name
                                            };
                                            var refTabL = firebase.database().ref("likes/").child(keyslike);
                                            refTabL.update(newDatalike).then(function () {

                                                if (compdataMensajeria === "true") {

                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                    refMensajeria.on("child_added", function (s) {
                                                        userdataMensajeria = s.val();
                                                        if (userdataMensajeria.correoM === resultado) {
                                                            var keysMensajeria = s.key;
                                                            var newDataMensajeria = {
                                                                nombreM: name
                                                            };
                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                if (compdatabandeja1 === "true") {
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {

                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {

                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {

                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdatabandeja1 === "true") {

                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                        refBandeja.on("child_added", function (s) {
                                                            userdataBandeja = s.val();
                                                            if (userdataBandeja.correo1 === resultado) {
                                                                var keysBandeja = s.key;
                                                                var newDataBandeja = {
                                                                    nombre1: name
                                                                };
                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                refTabB.update(newDataBandeja).then(function () {

                                                                    if (compdatabandeja2 === "true") {

                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                });
                                                            }
                                                        });

                                                    } else {

                                                        if (compdatabandeja2 === "true") {

                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                            refBandeja2.on("child_added", function (s) {
                                                                userdataBandeja2 = s.val();
                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                    var keysBandeja2 = s.key;
                                                                    var newDataBandeja2 = {
                                                                        nombre2: name
                                                                    };
                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                        location.replace("profile.html");
                                                                    });
                                                                }
                                                            });
                                                        } else {

                                                            location.replace("profile.html");
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    });
                                } else {
                                    if (compdataLike === "true") {
                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                        var reflike = firebase.database().ref("likes");
                                        reflike.on("child_added", function (s) {
                                            userdatalike = s.val();
                                            if (userdatalike.correo === resultado) {
                                                var keyslike = s.key;
                                                var newDatalike = {
                                                    nombreU: name
                                                };
                                                var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                refTabL.update(newDatalike).then(function () {
                                                    if (compdataMensajeria === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {

                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {

                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {
                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                        });
                                    } else {

                                        if (compdataMensajeria === "true") {
                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                            var refMensajeria = firebase.database().ref("baseMensajeria");
                                            refMensajeria.on("child_added", function (s) {
                                                userdataMensajeria = s.val();
                                                if (userdataMensajeria.correoM === resultado) {
                                                    var keysMensajeria = s.key;
                                                    var newDataMensajeria = {
                                                        nombreM: name
                                                    };
                                                    var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                    refTabM.update(newDataMensajeria).then(function () {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    });
                                                }
                                            });
                                        } else {

                                            if (compdatabandeja1 === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                refBandeja.on("child_added", function (s) {
                                                    userdataBandeja = s.val();
                                                    if (userdataBandeja.correo1 === resultado) {
                                                        var keysBandeja = s.key;
                                                        var newDataBandeja = {
                                                            nombre1: name
                                                        };
                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                        refTabB.update(newDataBandeja).then(function () {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        });
                                                    }
                                                });

                                            } else {

                                                if (compdatabandeja2 === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                    refBandeja2.on("child_added", function (s) {
                                                        userdataBandeja2 = s.val();
                                                        if (userdataBandeja2.correo2 === resultado) {
                                                            var keysBandeja2 = s.key;
                                                            var newDataBandeja2 = {
                                                                nombre2: name
                                                            };
                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                location.replace("profile.html");
                                                            });
                                                        }
                                                    });
                                                } else {
                                                    location.replace("profile.html");
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    } else {
                        location.replace("index.html");
                    }
                });
            }
            function actualizarProfile(url, k) {
                auth.onAuthStateChanged(function (user) {
                    if (user) {
                        var mail = user.email;
                        var encripta = cifrar(mail.toString());
                        var resultado = encripta.palabraEncriptada;

                        var compdataImagen = $("#compdataPub").val();
                        var compdataLike = $("#compdatalikes").val();
                        var compdataMensajeria = $("#compdataMensajeria").val();
                        var compdatabandeja1 = $("#compdatabandeja1").val();
                        var compdatabandeja2 = $("#compdatabandeja2").val();
                        var loaderMensaje = document.getElementById("loaderMensaje");

                        var docR = $("#key").val();
                        var name = $("#nameForm").val();
                        var susM = $("#susM").val();
                        susM = parseInt(susM);
                        var contraU = $("#contraU").val();
                        var presentacion = $("#presentation").val();

                        var coverImg = $("#nameForm").val();

                        if (document.querySelector('#contra').childElementCount > 1) {

                            var datanueva = {
                                nombre: name,
                                foto: url,
                                susM: susM,
                                contra: contraU,
                                presentacion: presentacion,
                                keyStorage: k
                            };
                        } else {
                            var datanueva = {
                                nombre: name,
                                foto: url,
                                susM: susM,
                                presentacion: presentacion,
                                keyStorage: k
                            };
                        }




                        fire.collection("IMAGENES").doc(docR).update(datanueva).then(function () {
                            if (compdataImagen === "true") {
                                loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                var ref = firebase.database().ref("Imagenes");
                                ref.on("child_added", function (s) {
                                    userdata = s.val();
                                    if (userdata.correoI === resultado) {
                                        var keys = s.key;
                                        var newData = {
                                            nombreU: name,
                                            profileIMG: url
                                        };
                                        var refTab = firebase.database().ref("Imagenes/").child(keys);
                                        refTab.update(newData).then(function () {
                                            if (compdataLike === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                                var reflike = firebase.database().ref("likes");
                                                reflike.on("child_added", function (s) {
                                                    userdatalike = s.val();
                                                    if (userdatalike.correo === resultado) {
                                                        var keyslike = s.key;
                                                        var newDatalike = {
                                                            nombreU: name,
                                                            url: url
                                                        };
                                                        var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                        refTabL.update(newDatalike).then(function () {
                                                            if (compdataMensajeria === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refMensajeria = firebase.database().ref("baseMensajeria");
                                                                refMensajeria.on("child_added", function (s) {
                                                                    userdataMensajeria = s.val();
                                                                    if (userdataMensajeria.correoM === resultado) {
                                                                        var keysMensajeria = s.key;
                                                                        var newDataMensajeria = {
                                                                            nombreM: name,
                                                                            foto: url
                                                                        };
                                                                        var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                        refTabM.update(newDataMensajeria).then(function () {

                                                                            if (compdatabandeja1 === "true") {
                                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                                refBandeja.on("child_added", function (s) {
                                                                                    userdataBandeja = s.val();
                                                                                    if (userdataBandeja.correo1 === resultado) {

                                                                                        var keysBandeja = s.key;
                                                                                        var newDataBandeja = {
                                                                                            nombre1: name,
                                                                                            urlCorreo1: url
                                                                                        };
                                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                                            if (compdatabandeja2 === "true") {

                                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                                refBandeja2.on("child_added", function (s) {
                                                                                                    userdataBandeja2 = s.val();
                                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                                        var keysBandeja2 = s.key;
                                                                                                        var newDataBandeja2 = {
                                                                                                            nombre2: name,
                                                                                                            urlCorreo2: url
                                                                                                        };
                                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                                            location.replace("profile.html");
                                                                                                        });
                                                                                                    }
                                                                                                });
                                                                                            } else {

                                                                                                location.replace("profile.html");
                                                                                            }
                                                                                        });
                                                                                    }
                                                                                });

                                                                            } else {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name,
                                                                                                urlCorreo2: url
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            }
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                if (compdatabandeja1 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {
                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name,
                                                                                urlCorreo1: url
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name,
                                                                                                urlCorreo2: url
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {
                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name,
                                                                                    urlCorreo2: url
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    }
                                                });
                                            } else {

                                                if (compdataMensajeria === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                    refMensajeria.on("child_added", function (s) {
                                                        userdataMensajeria = s.val();
                                                        if (userdataMensajeria.correoM === resultado) {
                                                            var keysMensajeria = s.key;
                                                            var newDataMensajeria = {
                                                                nombreM: name,
                                                                foto: url
                                                            };
                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                if (compdatabandeja1 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {
                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name,
                                                                                urlCorreo1: url
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name,
                                                                                                urlCorreo2: url
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name,
                                                                                    urlCorreo2: url
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdatabandeja1 === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                        refBandeja.on("child_added", function (s) {
                                                            userdataBandeja = s.val();
                                                            if (userdataBandeja.correo1 === resultado) {
                                                                var keysBandeja = s.key;
                                                                var newDataBandeja = {
                                                                    nombre1: name,
                                                                    urlCorreo1: url
                                                                };
                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                refTabB.update(newDataBandeja).then(function () {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name,
                                                                                    urlCorreo2: url
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                });
                                                            }
                                                        });

                                                    } else {

                                                        if (compdatabandeja2 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                            refBandeja2.on("child_added", function (s) {
                                                                userdataBandeja2 = s.val();
                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                    var keysBandeja2 = s.key;
                                                                    var newDataBandeja2 = {
                                                                        nombre2: name,
                                                                        urlCorreo2: url
                                                                    };
                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                        location.replace("profile.html");
                                                                    });
                                                                }
                                                            });
                                                        } else {
                                                            location.replace("profile.html");
                                                        }
                                                    }
                                                }
                                            }
                                        });
                                    }
                                });
                            } else {

                                if (compdataLike === "true") {

                                    var reflike = firebase.database().ref("likes");
                                    reflike.on("child_added", function (s) {
                                        userdatalike = s.val();
                                        if (userdatalike.correo === resultado) {
                                            var keyslike = s.key;
                                            var newDatalike = {
                                                nombreU: name,
                                                url: url
                                            };
                                            var refTabL = firebase.database().ref("likes/").child(keyslike);
                                            refTabL.update(newDatalike).then(function () {

                                                if (compdataMensajeria === "true") {

                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                    refMensajeria.on("child_added", function (s) {
                                                        userdataMensajeria = s.val();
                                                        if (userdataMensajeria.correoM === resultado) {
                                                            var keysMensajeria = s.key;
                                                            var newDataMensajeria = {
                                                                nombreM: name,
                                                                foto: url
                                                            };
                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                if (compdatabandeja1 === "true") {
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {

                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name,
                                                                                urlCorreo1: url
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {

                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name,
                                                                                                urlCorreo2: url
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {

                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name,
                                                                                    urlCorreo2: url
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdatabandeja1 === "true") {

                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                        refBandeja.on("child_added", function (s) {
                                                            userdataBandeja = s.val();
                                                            if (userdataBandeja.correo1 === resultado) {
                                                                var keysBandeja = s.key;
                                                                var newDataBandeja = {
                                                                    nombre1: name,
                                                                    urlCorreo1: url
                                                                };
                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                refTabB.update(newDataBandeja).then(function () {

                                                                    if (compdatabandeja2 === "true") {

                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name,
                                                                                    urlCorreo2: url
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                });
                                                            }
                                                        });

                                                    } else {

                                                        if (compdatabandeja2 === "true") {

                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                            refBandeja2.on("child_added", function (s) {
                                                                userdataBandeja2 = s.val();
                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                    var keysBandeja2 = s.key;
                                                                    var newDataBandeja2 = {
                                                                        nombre2: name,
                                                                        urlCorreo2: url
                                                                    };
                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                        location.replace("profile.html");
                                                                    });
                                                                }
                                                            });
                                                        } else {

                                                            location.replace("profile.html");
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    });
                                } else {
                                    if (compdataLike === "true") {
                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                        var reflike = firebase.database().ref("likes");
                                        reflike.on("child_added", function (s) {
                                            userdatalike = s.val();
                                            if (userdatalike.correo === resultado) {
                                                var keyslike = s.key;
                                                var newDatalike = {
                                                    nombreU: name,
                                                    url: url
                                                };
                                                var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                refTabL.update(newDatalike).then(function () {
                                                    if (compdataMensajeria === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name,
                                                                    foto: url
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {

                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {

                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name,
                                                                        urlCorreo1: url
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {
                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                        });
                                    } else {

                                        if (compdataMensajeria === "true") {
                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                            var refMensajeria = firebase.database().ref("baseMensajeria");
                                            refMensajeria.on("child_added", function (s) {
                                                userdataMensajeria = s.val();
                                                if (userdataMensajeria.correoM === resultado) {
                                                    var keysMensajeria = s.key;
                                                    var newDataMensajeria = {
                                                        nombreM: name,
                                                        foto: url
                                                    };
                                                    var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                    refTabM.update(newDataMensajeria).then(function () {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name,
                                                                        urlCorreo1: url
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    });
                                                }
                                            });
                                        } else {

                                            if (compdatabandeja1 === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                refBandeja.on("child_added", function (s) {
                                                    userdataBandeja = s.val();
                                                    if (userdataBandeja.correo1 === resultado) {
                                                        var keysBandeja = s.key;
                                                        var newDataBandeja = {
                                                            nombre1: name,
                                                            urlCorreo1: url
                                                        };
                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                        refTabB.update(newDataBandeja).then(function () {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        });
                                                    }
                                                });

                                            } else {

                                                if (compdatabandeja2 === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                    refBandeja2.on("child_added", function (s) {
                                                        userdataBandeja2 = s.val();
                                                        if (userdataBandeja2.correo2 === resultado) {
                                                            var keysBandeja2 = s.key;
                                                            var newDataBandeja2 = {
                                                                nombre2: name,
                                                                urlCorreo2: url
                                                            };
                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                location.replace("profile.html");
                                                            });
                                                        }
                                                    });
                                                } else {
                                                    location.replace("profile.html");
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    } else {
                        location.replace("index.html");
                    }
                });
            }

            function actualizarPortada(url, k) {
                auth.onAuthStateChanged(function (user) {
                    if (user) {
                        var mail = user.email;
                        var encripta = cifrar(mail.toString());
                        var resultado = encripta.palabraEncriptada;

                        var compdataImagen = $("#compdataPub").val();
                        var compdataLike = $("#compdatalikes").val();
                        var compdataMensajeria = $("#compdataMensajeria").val();
                        var compdatabandeja1 = $("#compdatabandeja1").val();
                        var compdatabandeja2 = $("#compdatabandeja2").val();
                        var loaderMensaje = document.getElementById("loaderMensaje");
                        var docR = $("#key").val();
                        var name = $("#nameForm").val();
                        var susM = $("#susM").val();
                        susM = parseInt(susM);
                        var contraU = $("#contraU").val();
                        var presentacion = $("#presentation").val();
                        if (document.querySelector('#contra').childElementCount > 1) {

                            var datanueva = {
                                nombre: name,
                                urlP: url,
                                susM: susM,
                                contra: contraU,
                                presentacion: presentacion,
                                keyStoragePortada: k
                            };
                        } else {
                            var datanueva = {
                                nombre: name,
                                urlP: url,
                                susM: susM,
                                presentacion: presentacion,
                                keyStoragePortada: k
                            };
                        }

                        fire.collection("IMAGENES").doc(docR).update(datanueva).then(function () {
                            if (compdataImagen === "true") {
                                loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                var ref = firebase.database().ref("Imagenes");
                                ref.on("child_added", function (s) {
                                    userdata = s.val();
                                    if (userdata.correoI === resultado) {
                                        var keys = s.key;
                                        var newData = {
                                            nombreU: name
                                        };
                                        var refTab = firebase.database().ref("Imagenes/").child(keys);
                                        refTab.update(newData).then(function () {
                                            if (compdataLike === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                                var reflike = firebase.database().ref("likes");
                                                reflike.on("child_added", function (s) {
                                                    userdatalike = s.val();
                                                    if (userdatalike.correo === resultado) {
                                                        var keyslike = s.key;
                                                        var newDatalike = {
                                                            nombreU: name
                                                        };
                                                        var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                        refTabL.update(newDatalike).then(function () {
                                                            if (compdataMensajeria === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refMensajeria = firebase.database().ref("baseMensajeria");
                                                                refMensajeria.on("child_added", function (s) {
                                                                    userdataMensajeria = s.val();
                                                                    if (userdataMensajeria.correoM === resultado) {
                                                                        var keysMensajeria = s.key;
                                                                        var newDataMensajeria = {
                                                                            nombreM: name
                                                                        };
                                                                        var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                        refTabM.update(newDataMensajeria).then(function () {

                                                                            if (compdatabandeja1 === "true") {
                                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                                refBandeja.on("child_added", function (s) {
                                                                                    userdataBandeja = s.val();
                                                                                    if (userdataBandeja.correo1 === resultado) {

                                                                                        var keysBandeja = s.key;
                                                                                        var newDataBandeja = {
                                                                                            nombre1: name
                                                                                        };
                                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                                            if (compdatabandeja2 === "true") {

                                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                                refBandeja2.on("child_added", function (s) {
                                                                                                    userdataBandeja2 = s.val();
                                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                                        var keysBandeja2 = s.key;
                                                                                                        var newDataBandeja2 = {
                                                                                                            nombre2: name
                                                                                                        };
                                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                                            location.replace("profile.html");
                                                                                                        });
                                                                                                    }
                                                                                                });
                                                                                            } else {

                                                                                                location.replace("profile.html");
                                                                                            }
                                                                                        });
                                                                                    }
                                                                                });

                                                                            } else {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            }
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                if (compdatabandeja1 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {
                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {
                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            }
                                                        });
                                                    }
                                                });
                                            } else {

                                                if (compdataMensajeria === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                    refMensajeria.on("child_added", function (s) {
                                                        userdataMensajeria = s.val();
                                                        if (userdataMensajeria.correoM === resultado) {
                                                            var keysMensajeria = s.key;
                                                            var newDataMensajeria = {
                                                                nombreM: name
                                                            };
                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                if (compdatabandeja1 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {
                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {
                                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdatabandeja1 === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                        refBandeja.on("child_added", function (s) {
                                                            userdataBandeja = s.val();
                                                            if (userdataBandeja.correo1 === resultado) {
                                                                var keysBandeja = s.key;
                                                                var newDataBandeja = {
                                                                    nombre1: name
                                                                };
                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                refTabB.update(newDataBandeja).then(function () {

                                                                    if (compdatabandeja2 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                });
                                                            }
                                                        });

                                                    } else {

                                                        if (compdatabandeja2 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                            refBandeja2.on("child_added", function (s) {
                                                                userdataBandeja2 = s.val();
                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                    var keysBandeja2 = s.key;
                                                                    var newDataBandeja2 = {
                                                                        nombre2: name
                                                                    };
                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                        location.replace("profile.html");
                                                                    });
                                                                }
                                                            });
                                                        } else {
                                                            location.replace("profile.html");
                                                        }
                                                    }
                                                }
                                            }
                                        });
                                    }
                                });
                            } else {

                                if (compdataLike === "true") {

                                    var reflike = firebase.database().ref("likes");
                                    reflike.on("child_added", function (s) {
                                        userdatalike = s.val();
                                        if (userdatalike.correo === resultado) {
                                            var keyslike = s.key;
                                            var newDatalike = {
                                                nombreU: name
                                            };
                                            var refTabL = firebase.database().ref("likes/").child(keyslike);
                                            refTabL.update(newDatalike).then(function () {

                                                if (compdataMensajeria === "true") {

                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                    refMensajeria.on("child_added", function (s) {
                                                        userdataMensajeria = s.val();
                                                        if (userdataMensajeria.correoM === resultado) {
                                                            var keysMensajeria = s.key;
                                                            var newDataMensajeria = {
                                                                nombreM: name
                                                            };
                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                if (compdatabandeja1 === "true") {
                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                    refBandeja.on("child_added", function (s) {
                                                                        userdataBandeja = s.val();
                                                                        if (userdataBandeja.correo1 === resultado) {

                                                                            var keysBandeja = s.key;
                                                                            var newDataBandeja = {
                                                                                nombre1: name
                                                                            };
                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                if (compdatabandeja2 === "true") {

                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                        userdataBandeja2 = s.val();
                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                            var keysBandeja2 = s.key;
                                                                                            var newDataBandeja2 = {
                                                                                                nombre2: name
                                                                                            };
                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                location.replace("profile.html");
                                                                                            });
                                                                                        }
                                                                                    });
                                                                                } else {

                                                                                    location.replace("profile.html");
                                                                                }
                                                                            });
                                                                        }
                                                                    });

                                                                } else {

                                                                    if (compdatabandeja2 === "true") {

                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdatabandeja1 === "true") {

                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                        refBandeja.on("child_added", function (s) {
                                                            userdataBandeja = s.val();
                                                            if (userdataBandeja.correo1 === resultado) {
                                                                var keysBandeja = s.key;
                                                                var newDataBandeja = {
                                                                    nombre1: name
                                                                };
                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                refTabB.update(newDataBandeja).then(function () {

                                                                    if (compdatabandeja2 === "true") {

                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                        refBandeja2.on("child_added", function (s) {
                                                                            userdataBandeja2 = s.val();
                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                var keysBandeja2 = s.key;
                                                                                var newDataBandeja2 = {
                                                                                    nombre2: name
                                                                                };
                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                    location.replace("profile.html");
                                                                                });
                                                                            }
                                                                        });
                                                                    } else {

                                                                        location.replace("profile.html");
                                                                    }
                                                                });
                                                            }
                                                        });

                                                    } else {

                                                        if (compdatabandeja2 === "true") {

                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                            refBandeja2.on("child_added", function (s) {
                                                                userdataBandeja2 = s.val();
                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                    var keysBandeja2 = s.key;
                                                                    var newDataBandeja2 = {
                                                                        nombre2: name
                                                                    };
                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                        location.replace("profile.html");
                                                                    });
                                                                }
                                                            });
                                                        } else {

                                                            location.replace("profile.html");
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    });
                                } else {
                                    if (compdataLike === "true") {
                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                        var reflike = firebase.database().ref("likes");
                                        reflike.on("child_added", function (s) {
                                            userdatalike = s.val();
                                            if (userdatalike.correo === resultado) {
                                                var keyslike = s.key;
                                                var newDatalike = {
                                                    nombreU: name
                                                };
                                                var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                refTabL.update(newDatalike).then(function () {
                                                    if (compdataMensajeria === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {

                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {

                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {
                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                        });
                                    } else {

                                        if (compdataMensajeria === "true") {
                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                            var refMensajeria = firebase.database().ref("baseMensajeria");
                                            refMensajeria.on("child_added", function (s) {
                                                userdataMensajeria = s.val();
                                                if (userdataMensajeria.correoM === resultado) {
                                                    var keysMensajeria = s.key;
                                                    var newDataMensajeria = {
                                                        nombreM: name
                                                    };
                                                    var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                    refTabM.update(newDataMensajeria).then(function () {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    });
                                                }
                                            });
                                        } else {

                                            if (compdatabandeja1 === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                refBandeja.on("child_added", function (s) {
                                                    userdataBandeja = s.val();
                                                    if (userdataBandeja.correo1 === resultado) {
                                                        var keysBandeja = s.key;
                                                        var newDataBandeja = {
                                                            nombre1: name
                                                        };
                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                        refTabB.update(newDataBandeja).then(function () {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        });
                                                    }
                                                });

                                            } else {

                                                if (compdatabandeja2 === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                    refBandeja2.on("child_added", function (s) {
                                                        userdataBandeja2 = s.val();
                                                        if (userdataBandeja2.correo2 === resultado) {
                                                            var keysBandeja2 = s.key;
                                                            var newDataBandeja2 = {
                                                                nombre2: name
                                                            };
                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                location.replace("profile.html");
                                                            });
                                                        }
                                                    });
                                                } else {
                                                    location.replace("profile.html");
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        });
                    } else {
                        location.replace("index.html");
                    }
                });
            }
            function actualizarProfile_Portada(downloadURLPerfil, keyPerfil, downloadUrlPortada, keyPortada) {
                auth.onAuthStateChanged(function (user) {
                    if (user) {
                        var mail = user.email;
                        var encripta = cifrar(mail.toString());
                        var resultado = encripta.palabraEncriptada;
                        var url = downloadURLPerfil;

                        var compdataImagen = $("#compdataPub").val();
                        var compdataLike = $("#compdatalikes").val();
                        var compdataMensajeria = $("#compdataMensajeria").val();
                        var compdatabandeja1 = $("#compdatabandeja1").val();
                        var compdatabandeja2 = $("#compdatabandeja2").val();
                        var loaderMensaje = document.getElementById("loaderMensaje");
                        var docR = $("#key").val();
                        var name = $("#nameForm").val();
                        var susM = $("#susM").val();
                        susM = parseInt(susM);
                        var contraU = $("#contraU").val();
                        var presentacion = $("#presentation").val();
                        var correoUserText = $("#correo").val();
                        if (document.querySelector('#contra').childElementCount > 1) {
                            var datanueva = {
                                nombre: name,
                                urlP: downloadUrlPortada,
                                susM: susM,
                                contra: contraU,
                                presentacion: presentacion,
                                keyStoragePortada: keyPortada,
                                foto: downloadURLPerfil,
                                keyStorage: keyPerfil
                            };
                            fire.collection("IMAGENES").doc(docR).update(datanueva).then(function () {
                                if (compdataImagen === "true") {
                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                    var ref = firebase.database().ref("Imagenes");
                                    ref.on("child_added", function (s) {
                                        userdata = s.val();
                                        if (userdata.correoI === resultado) {
                                            var keys = s.key;
                                            var newData = {
                                                nombreU: name,
                                                profileIMG: url
                                            };
                                            var refTab = firebase.database().ref("Imagenes/").child(keys);
                                            refTab.update(newData).then(function () {
                                                if (compdataLike === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                                    var reflike = firebase.database().ref("likes");
                                                    reflike.on("child_added", function (s) {
                                                        userdatalike = s.val();
                                                        if (userdatalike.correo === resultado) {
                                                            var keyslike = s.key;
                                                            var newDatalike = {
                                                                nombreU: name,
                                                                url: url
                                                            };
                                                            var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                            refTabL.update(newDatalike).then(function () {
                                                                if (compdataMensajeria === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                                    refMensajeria.on("child_added", function (s) {
                                                                        userdataMensajeria = s.val();
                                                                        if (userdataMensajeria.correoM === resultado) {
                                                                            var keysMensajeria = s.key;
                                                                            var newDataMensajeria = {
                                                                                nombreM: name,
                                                                                foto: url
                                                                            };
                                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                                if (compdatabandeja1 === "true") {
                                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                                    refBandeja.on("child_added", function (s) {
                                                                                        userdataBandeja = s.val();
                                                                                        if (userdataBandeja.correo1 === resultado) {

                                                                                            var keysBandeja = s.key;
                                                                                            var newDataBandeja = {
                                                                                                nombre1: name,
                                                                                                urlCorreo1: url
                                                                                            };
                                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                                if (compdatabandeja2 === "true") {

                                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                                        userdataBandeja2 = s.val();
                                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                                            var keysBandeja2 = s.key;
                                                                                                            var newDataBandeja2 = {
                                                                                                                nombre2: name,
                                                                                                                urlCorreo2: url
                                                                                                            };
                                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                                location.replace("profile.html");
                                                                                                            });
                                                                                                        }
                                                                                                    });
                                                                                                } else {

                                                                                                    location.replace("profile.html");
                                                                                                }
                                                                                            });
                                                                                        }
                                                                                    });

                                                                                } else {

                                                                                    if (compdatabandeja2 === "true") {
                                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                }
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    if (compdatabandeja1 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {
                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {
                                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {
                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdataMensajeria === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name,
                                                                    foto: url
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {
                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {
                                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name,
                                                                        urlCorreo1: url
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {
                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    });
                                } else {

                                    if (compdataLike === "true") {

                                        var reflike = firebase.database().ref("likes");
                                        reflike.on("child_added", function (s) {
                                            userdatalike = s.val();
                                            if (userdatalike.correo === resultado) {
                                                var keyslike = s.key;
                                                var newDatalike = {
                                                    nombreU: name,
                                                    url: url
                                                };
                                                var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                refTabL.update(newDatalike).then(function () {

                                                    if (compdataMensajeria === "true") {

                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name,
                                                                    foto: url
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {

                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {

                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {

                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {

                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name,
                                                                        urlCorreo1: url
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {

                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {

                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                        });
                                    } else {
                                        if (compdataLike === "true") {
                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                            var reflike = firebase.database().ref("likes");
                                            reflike.on("child_added", function (s) {
                                                userdatalike = s.val();
                                                if (userdatalike.correo === resultado) {
                                                    var keyslike = s.key;
                                                    var newDatalike = {
                                                        nombreU: name,
                                                        url: url
                                                    };
                                                    var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                    refTabL.update(newDatalike).then(function () {
                                                        if (compdataMensajeria === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refMensajeria = firebase.database().ref("baseMensajeria");
                                                            refMensajeria.on("child_added", function (s) {
                                                                userdataMensajeria = s.val();
                                                                if (userdataMensajeria.correoM === resultado) {
                                                                    var keysMensajeria = s.key;
                                                                    var newDataMensajeria = {
                                                                        nombreM: name,
                                                                        foto: url
                                                                    };
                                                                    var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                    refTabM.update(newDataMensajeria).then(function () {

                                                                        if (compdatabandeja1 === "true") {
                                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                                            refBandeja.on("child_added", function (s) {
                                                                                userdataBandeja = s.val();
                                                                                if (userdataBandeja.correo1 === resultado) {

                                                                                    var keysBandeja = s.key;
                                                                                    var newDataBandeja = {
                                                                                        nombre1: name,
                                                                                        urlCorreo1: url
                                                                                    };
                                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                                        if (compdatabandeja2 === "true") {

                                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                            refBandeja2.on("child_added", function (s) {
                                                                                                userdataBandeja2 = s.val();
                                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                                    var keysBandeja2 = s.key;
                                                                                                    var newDataBandeja2 = {
                                                                                                        nombre2: name,
                                                                                                        urlCorreo2: url
                                                                                                    };
                                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                                        location.replace("profile.html");
                                                                                                    });
                                                                                                }
                                                                                            });
                                                                                        } else {

                                                                                            location.replace("profile.html");
                                                                                        }
                                                                                    });
                                                                                }
                                                                            });

                                                                        } else {

                                                                            if (compdatabandeja2 === "true") {
                                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                refBandeja2.on("child_added", function (s) {
                                                                                    userdataBandeja2 = s.val();
                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                        var keysBandeja2 = s.key;
                                                                                        var newDataBandeja2 = {
                                                                                            nombre2: name,
                                                                                            urlCorreo2: url
                                                                                        };
                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                            location.replace("profile.html");
                                                                                        });
                                                                                    }
                                                                                });
                                                                            } else {

                                                                                location.replace("profile.html");
                                                                            }
                                                                        }
                                                                    });
                                                                }
                                                            });
                                                        } else {

                                                            if (compdatabandeja1 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                refBandeja.on("child_added", function (s) {
                                                                    userdataBandeja = s.val();
                                                                    if (userdataBandeja.correo1 === resultado) {
                                                                        var keysBandeja = s.key;
                                                                        var newDataBandeja = {
                                                                            nombre1: name,
                                                                            urlCorreo1: url
                                                                        };
                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                            if (compdatabandeja2 === "true") {
                                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                refBandeja2.on("child_added", function (s) {
                                                                                    userdataBandeja2 = s.val();
                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                        var keysBandeja2 = s.key;
                                                                                        var newDataBandeja2 = {
                                                                                            nombre2: name,
                                                                                            urlCorreo2: url
                                                                                        };
                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                        refTabB2.update(newDataBandeja2).then(function () {
                                                                                            location.replace("profile.html");
                                                                                        });
                                                                                    }
                                                                                });
                                                                            } else {

                                                                                location.replace("profile.html");
                                                                            }
                                                                        });
                                                                    }
                                                                });

                                                            } else {

                                                                if (compdatabandeja2 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                    refBandeja2.on("child_added", function (s) {
                                                                        userdataBandeja2 = s.val();
                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                            var keysBandeja2 = s.key;
                                                                            var newDataBandeja2 = {
                                                                                nombre2: name,
                                                                                urlCorreo2: url
                                                                            };
                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                location.replace("profile.html");
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    location.replace("profile.html");
                                                                }
                                                            }
                                                        }
                                                    });
                                                }
                                            });
                                        } else {

                                            if (compdataMensajeria === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                var refMensajeria = firebase.database().ref("baseMensajeria");
                                                refMensajeria.on("child_added", function (s) {
                                                    userdataMensajeria = s.val();
                                                    if (userdataMensajeria.correoM === resultado) {
                                                        var keysMensajeria = s.key;
                                                        var newDataMensajeria = {
                                                            nombreM: name,
                                                            foto: url
                                                        };
                                                        var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                        refTabM.update(newDataMensajeria).then(function () {

                                                            if (compdatabandeja1 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                refBandeja.on("child_added", function (s) {
                                                                    userdataBandeja = s.val();
                                                                    if (userdataBandeja.correo1 === resultado) {
                                                                        var keysBandeja = s.key;
                                                                        var newDataBandeja = {
                                                                            nombre1: name,
                                                                            urlCorreo1: url
                                                                        };
                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                            if (compdatabandeja2 === "true") {
                                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                refBandeja2.on("child_added", function (s) {
                                                                                    userdataBandeja2 = s.val();
                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                        var keysBandeja2 = s.key;
                                                                                        var newDataBandeja2 = {
                                                                                            nombre2: name,
                                                                                            urlCorreo2: url
                                                                                        };
                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                            location.replace("profile.html");
                                                                                        });
                                                                                    }
                                                                                });
                                                                            } else {

                                                                                location.replace("profile.html");
                                                                            }
                                                                        });
                                                                    }
                                                                });

                                                            } else {

                                                                if (compdatabandeja2 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                    refBandeja2.on("child_added", function (s) {
                                                                        userdataBandeja2 = s.val();
                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                            var keysBandeja2 = s.key;
                                                                            var newDataBandeja2 = {
                                                                                nombre2: name,
                                                                                urlCorreo2: url
                                                                            };
                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                location.replace("profile.html");
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    location.replace("profile.html");
                                                                }
                                                            }
                                                        });
                                                    }
                                                });
                                            } else {

                                                if (compdatabandeja1 === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                    refBandeja.on("child_added", function (s) {
                                                        userdataBandeja = s.val();
                                                        if (userdataBandeja.correo1 === resultado) {
                                                            var keysBandeja = s.key;
                                                            var newDataBandeja = {
                                                                nombre1: name,
                                                                urlCorreo1: url
                                                            };
                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                            refTabB.update(newDataBandeja).then(function () {

                                                                if (compdatabandeja2 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                    refBandeja2.on("child_added", function (s) {
                                                                        userdataBandeja2 = s.val();
                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                            var keysBandeja2 = s.key;
                                                                            var newDataBandeja2 = {
                                                                                nombre2: name,
                                                                                urlCorreo2: url
                                                                            };
                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                location.replace("profile.html");
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    location.replace("profile.html");
                                                                }
                                                            });
                                                        }
                                                    });

                                                } else {

                                                    if (compdatabandeja2 === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                        refBandeja2.on("child_added", function (s) {
                                                            userdataBandeja2 = s.val();
                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                var keysBandeja2 = s.key;
                                                                var newDataBandeja2 = {
                                                                    nombre2: name,
                                                                    urlCorreo2: url
                                                                };
                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                    location.replace("profile.html");
                                                                });
                                                            }
                                                        });
                                                    } else {
                                                        location.replace("profile.html");
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            });
                        } else {
                            var datanueva = {
                                nombre: name,
                                urlP: downloadUrlPortada,
                                susM: susM,
                                presentacion: presentacion,
                                keyStoragePortada: keyPortada,
                                foto: downloadURLPerfil,
                                keyStorage: keyPerfil
                            };
                            fire.collection("IMAGENES").doc(docR).update(datanueva).then(function () {
                                if (compdataImagen === "true") {
                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                    var ref = firebase.database().ref("Imagenes");
                                    ref.on("child_added", function (s) {
                                        userdata = s.val();
                                        if (userdata.correoI === resultado) {
                                            var keys = s.key;
                                            var newData = {
                                                nombreU: name,
                                                profileIMG: url
                                            };
                                            var refTab = firebase.database().ref("Imagenes/").child(keys);
                                            refTab.update(newData).then(function () {
                                                if (compdataLike === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                                    var reflike = firebase.database().ref("likes");
                                                    reflike.on("child_added", function (s) {
                                                        userdatalike = s.val();
                                                        if (userdatalike.correo === resultado) {
                                                            var keyslike = s.key;
                                                            var newDatalike = {
                                                                nombreU: name,
                                                                url: url
                                                            };
                                                            var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                            refTabL.update(newDatalike).then(function () {
                                                                if (compdataMensajeria === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refMensajeria = firebase.database().ref("baseMensajeria");
                                                                    refMensajeria.on("child_added", function (s) {
                                                                        userdataMensajeria = s.val();
                                                                        if (userdataMensajeria.correoM === resultado) {
                                                                            var keysMensajeria = s.key;
                                                                            var newDataMensajeria = {
                                                                                nombreM: name,
                                                                                foto: url
                                                                            };
                                                                            var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                            refTabM.update(newDataMensajeria).then(function () {

                                                                                if (compdatabandeja1 === "true") {
                                                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                                                    refBandeja.on("child_added", function (s) {
                                                                                        userdataBandeja = s.val();
                                                                                        if (userdataBandeja.correo1 === resultado) {

                                                                                            var keysBandeja = s.key;
                                                                                            var newDataBandeja = {
                                                                                                nombre1: name,
                                                                                                urlCorreo1: url
                                                                                            };
                                                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                            refTabB.update(newDataBandeja).then(function () {

                                                                                                if (compdatabandeja2 === "true") {

                                                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                                    refBandeja2.on("child_added", function (s) {
                                                                                                        userdataBandeja2 = s.val();
                                                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                                                            var keysBandeja2 = s.key;
                                                                                                            var newDataBandeja2 = {
                                                                                                                nombre2: name,
                                                                                                                urlCorreo2: url
                                                                                                            };
                                                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                                                location.replace("profile.html");
                                                                                                            });
                                                                                                        }
                                                                                                    });
                                                                                                } else {

                                                                                                    location.replace("profile.html");
                                                                                                }
                                                                                            });
                                                                                        }
                                                                                    });

                                                                                } else {

                                                                                    if (compdatabandeja2 === "true") {
                                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                }
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    if (compdatabandeja1 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {
                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {
                                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {
                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                }
                                                            });
                                                        }
                                                    });
                                                } else {

                                                    if (compdataMensajeria === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name,
                                                                    foto: url
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {
                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {
                                                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name,
                                                                        urlCorreo1: url
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {
                                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {
                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                }
                                            });
                                        }
                                    });
                                } else {

                                    if (compdataLike === "true") {

                                        var reflike = firebase.database().ref("likes");
                                        reflike.on("child_added", function (s) {
                                            userdatalike = s.val();
                                            if (userdatalike.correo === resultado) {
                                                var keyslike = s.key;
                                                var newDatalike = {
                                                    nombreU: name,
                                                    url: url
                                                };
                                                var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                refTabL.update(newDatalike).then(function () {

                                                    if (compdataMensajeria === "true") {

                                                        var refMensajeria = firebase.database().ref("baseMensajeria");
                                                        refMensajeria.on("child_added", function (s) {
                                                            userdataMensajeria = s.val();
                                                            if (userdataMensajeria.correoM === resultado) {
                                                                var keysMensajeria = s.key;
                                                                var newDataMensajeria = {
                                                                    nombreM: name,
                                                                    foto: url
                                                                };
                                                                var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                refTabM.update(newDataMensajeria).then(function () {

                                                                    if (compdatabandeja1 === "true") {
                                                                        var refBandeja = firebase.database().ref("baseBandeja");
                                                                        refBandeja.on("child_added", function (s) {
                                                                            userdataBandeja = s.val();
                                                                            if (userdataBandeja.correo1 === resultado) {

                                                                                var keysBandeja = s.key;
                                                                                var newDataBandeja = {
                                                                                    nombre1: name,
                                                                                    urlCorreo1: url
                                                                                };
                                                                                var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                refTabB.update(newDataBandeja).then(function () {

                                                                                    if (compdatabandeja2 === "true") {

                                                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                        refBandeja2.on("child_added", function (s) {
                                                                                            userdataBandeja2 = s.val();
                                                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                                                var keysBandeja2 = s.key;
                                                                                                var newDataBandeja2 = {
                                                                                                    nombre2: name,
                                                                                                    urlCorreo2: url
                                                                                                };
                                                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                                                    location.replace("profile.html");
                                                                                                });
                                                                                            }
                                                                                        });
                                                                                    } else {

                                                                                        location.replace("profile.html");
                                                                                    }
                                                                                });
                                                                            }
                                                                        });

                                                                    } else {

                                                                        if (compdatabandeja2 === "true") {

                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    }
                                                                });
                                                            }
                                                        });
                                                    } else {

                                                        if (compdatabandeja1 === "true") {

                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                            refBandeja.on("child_added", function (s) {
                                                                userdataBandeja = s.val();
                                                                if (userdataBandeja.correo1 === resultado) {
                                                                    var keysBandeja = s.key;
                                                                    var newDataBandeja = {
                                                                        nombre1: name,
                                                                        urlCorreo1: url
                                                                    };
                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                        if (compdatabandeja2 === "true") {

                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                            refBandeja2.on("child_added", function (s) {
                                                                                userdataBandeja2 = s.val();
                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                    var keysBandeja2 = s.key;
                                                                                    var newDataBandeja2 = {
                                                                                        nombre2: name,
                                                                                        urlCorreo2: url
                                                                                    };
                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                        location.replace("profile.html");
                                                                                    });
                                                                                }
                                                                            });
                                                                        } else {

                                                                            location.replace("profile.html");
                                                                        }
                                                                    });
                                                                }
                                                            });

                                                        } else {

                                                            if (compdatabandeja2 === "true") {

                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                refBandeja2.on("child_added", function (s) {
                                                                    userdataBandeja2 = s.val();
                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                        var keysBandeja2 = s.key;
                                                                        var newDataBandeja2 = {
                                                                            nombre2: name,
                                                                            urlCorreo2: url
                                                                        };
                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                            location.replace("profile.html");
                                                                        });
                                                                    }
                                                                });
                                                            } else {

                                                                location.replace("profile.html");
                                                            }
                                                        }
                                                    }
                                                });
                                            }
                                        });
                                    } else {
                                        if (compdataLike === "true") {
                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus notificaciones y comentarios...';
                                            var reflike = firebase.database().ref("likes");
                                            reflike.on("child_added", function (s) {
                                                userdatalike = s.val();
                                                if (userdatalike.correo === resultado) {
                                                    var keyslike = s.key;
                                                    var newDatalike = {
                                                        nombreU: name,
                                                        url: url
                                                    };
                                                    var refTabL = firebase.database().ref("likes/").child(keyslike);
                                                    refTabL.update(newDatalike).then(function () {
                                                        if (compdataMensajeria === "true") {
                                                            loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                            var refMensajeria = firebase.database().ref("baseMensajeria");
                                                            refMensajeria.on("child_added", function (s) {
                                                                userdataMensajeria = s.val();
                                                                if (userdataMensajeria.correoM === resultado) {
                                                                    var keysMensajeria = s.key;
                                                                    var newDataMensajeria = {
                                                                        nombreM: name,
                                                                        foto: url
                                                                    };
                                                                    var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                                    refTabM.update(newDataMensajeria).then(function () {

                                                                        if (compdatabandeja1 === "true") {
                                                                            var refBandeja = firebase.database().ref("baseBandeja");
                                                                            refBandeja.on("child_added", function (s) {
                                                                                userdataBandeja = s.val();
                                                                                if (userdataBandeja.correo1 === resultado) {

                                                                                    var keysBandeja = s.key;
                                                                                    var newDataBandeja = {
                                                                                        nombre1: name,
                                                                                        urlCorreo1: url
                                                                                    };
                                                                                    var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                                    refTabB.update(newDataBandeja).then(function () {

                                                                                        if (compdatabandeja2 === "true") {

                                                                                            var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                            refBandeja2.on("child_added", function (s) {
                                                                                                userdataBandeja2 = s.val();
                                                                                                if (userdataBandeja2.correo2 === resultado) {
                                                                                                    var keysBandeja2 = s.key;
                                                                                                    var newDataBandeja2 = {
                                                                                                        nombre2: name,
                                                                                                        urlCorreo2: url
                                                                                                    };
                                                                                                    var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                                    refTabB2.update(newDataBandeja2).then(function () {

                                                                                                        location.replace("profile.html");
                                                                                                    });
                                                                                                }
                                                                                            });
                                                                                        } else {

                                                                                            location.replace("profile.html");
                                                                                        }
                                                                                    });
                                                                                }
                                                                            });

                                                                        } else {

                                                                            if (compdatabandeja2 === "true") {
                                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                refBandeja2.on("child_added", function (s) {
                                                                                    userdataBandeja2 = s.val();
                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                        var keysBandeja2 = s.key;
                                                                                        var newDataBandeja2 = {
                                                                                            nombre2: name,
                                                                                            urlCorreo2: url
                                                                                        };
                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                            location.replace("profile.html");
                                                                                        });
                                                                                    }
                                                                                });
                                                                            } else {

                                                                                location.replace("profile.html");
                                                                            }
                                                                        }
                                                                    });
                                                                }
                                                            });
                                                        } else {

                                                            if (compdatabandeja1 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus publicaciones por favor espere...';
                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                refBandeja.on("child_added", function (s) {
                                                                    userdataBandeja = s.val();
                                                                    if (userdataBandeja.correo1 === resultado) {
                                                                        var keysBandeja = s.key;
                                                                        var newDataBandeja = {
                                                                            nombre1: name,
                                                                            urlCorreo1: url
                                                                        };
                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                            if (compdatabandeja2 === "true") {
                                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                refBandeja2.on("child_added", function (s) {
                                                                                    userdataBandeja2 = s.val();
                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                        var keysBandeja2 = s.key;
                                                                                        var newDataBandeja2 = {
                                                                                            nombre2: name,
                                                                                            urlCorreo2: url
                                                                                        };
                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                        refTabB2.update(newDataBandeja2).then(function () {
                                                                                            location.replace("profile.html");
                                                                                        });
                                                                                    }
                                                                                });
                                                                            } else {

                                                                                location.replace("profile.html");
                                                                            }
                                                                        });
                                                                    }
                                                                });

                                                            } else {

                                                                if (compdatabandeja2 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                    refBandeja2.on("child_added", function (s) {
                                                                        userdataBandeja2 = s.val();
                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                            var keysBandeja2 = s.key;
                                                                            var newDataBandeja2 = {
                                                                                nombre2: name,
                                                                                urlCorreo2: url
                                                                            };
                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                location.replace("profile.html");
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    location.replace("profile.html");
                                                                }
                                                            }
                                                        }
                                                    });
                                                }
                                            });
                                        } else {

                                            if (compdataMensajeria === "true") {
                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                var refMensajeria = firebase.database().ref("baseMensajeria");
                                                refMensajeria.on("child_added", function (s) {
                                                    userdataMensajeria = s.val();
                                                    if (userdataMensajeria.correoM === resultado) {
                                                        var keysMensajeria = s.key;
                                                        var newDataMensajeria = {
                                                            nombreM: name,
                                                            foto: url
                                                        };
                                                        var refTabM = firebase.database().ref("baseMensajeria/").child(keysMensajeria);
                                                        refTabM.update(newDataMensajeria).then(function () {

                                                            if (compdatabandeja1 === "true") {
                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                var refBandeja = firebase.database().ref("baseBandeja");
                                                                refBandeja.on("child_added", function (s) {
                                                                    userdataBandeja = s.val();
                                                                    if (userdataBandeja.correo1 === resultado) {
                                                                        var keysBandeja = s.key;
                                                                        var newDataBandeja = {
                                                                            nombre1: name,
                                                                            urlCorreo1: url
                                                                        };
                                                                        var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                                        refTabB.update(newDataBandeja).then(function () {

                                                                            if (compdatabandeja2 === "true") {
                                                                                loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                                var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                                refBandeja2.on("child_added", function (s) {
                                                                                    userdataBandeja2 = s.val();
                                                                                    if (userdataBandeja2.correo2 === resultado) {
                                                                                        var keysBandeja2 = s.key;
                                                                                        var newDataBandeja2 = {
                                                                                            nombre2: name,
                                                                                            urlCorreo2: url
                                                                                        };
                                                                                        var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                                        refTabB2.update(newDataBandeja2).then(function () {

                                                                                            location.replace("profile.html");
                                                                                        });
                                                                                    }
                                                                                });
                                                                            } else {

                                                                                location.replace("profile.html");
                                                                            }
                                                                        });
                                                                    }
                                                                });

                                                            } else {

                                                                if (compdatabandeja2 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                    refBandeja2.on("child_added", function (s) {
                                                                        userdataBandeja2 = s.val();
                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                            var keysBandeja2 = s.key;
                                                                            var newDataBandeja2 = {
                                                                                nombre2: name,
                                                                                urlCorreo2: url
                                                                            };
                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                location.replace("profile.html");
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    location.replace("profile.html");
                                                                }
                                                            }
                                                        });
                                                    }
                                                });
                                            } else {

                                                if (compdatabandeja1 === "true") {
                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                    var refBandeja = firebase.database().ref("baseBandeja");
                                                    refBandeja.on("child_added", function (s) {
                                                        userdataBandeja = s.val();
                                                        if (userdataBandeja.correo1 === resultado) {
                                                            var keysBandeja = s.key;
                                                            var newDataBandeja = {
                                                                nombre1: name,
                                                                urlCorreo1: url
                                                            };
                                                            var refTabB = firebase.database().ref("baseBandeja/").child(keysBandeja);
                                                            refTabB.update(newDataBandeja).then(function () {

                                                                if (compdatabandeja2 === "true") {
                                                                    loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                                    var refBandeja2 = firebase.database().ref("baseBandeja");
                                                                    refBandeja2.on("child_added", function (s) {
                                                                        userdataBandeja2 = s.val();
                                                                        if (userdataBandeja2.correo2 === resultado) {
                                                                            var keysBandeja2 = s.key;
                                                                            var newDataBandeja2 = {
                                                                                nombre2: name,
                                                                                urlCorreo2: url
                                                                            };
                                                                            var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                            refTabB2.update(newDataBandeja2).then(function () {

                                                                                location.replace("profile.html");
                                                                            });
                                                                        }
                                                                    });
                                                                } else {

                                                                    location.replace("profile.html");
                                                                }
                                                            });
                                                        }
                                                    });

                                                } else {

                                                    if (compdatabandeja2 === "true") {
                                                        loaderMensaje.innerHTML = 'Actualizando los datos en sus mensajes por favor espere...';
                                                        var refBandeja2 = firebase.database().ref("baseBandeja");
                                                        refBandeja2.on("child_added", function (s) {
                                                            userdataBandeja2 = s.val();
                                                            if (userdataBandeja2.correo2 === resultado) {
                                                                var keysBandeja2 = s.key;
                                                                var newDataBandeja2 = {
                                                                    nombre2: name,
                                                                    urlCorreo2: url
                                                                };
                                                                var refTabB2 = firebase.database().ref("baseBandeja/").child(keysBandeja2);
                                                                refTabB2.update(newDataBandeja2).then(function () {

                                                                    location.replace("profile.html");
                                                                });
                                                            }
                                                        });
                                                    } else {
                                                        location.replace("profile.html");
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            });
                        }
                    } else {
                        location.replace("index.html");
                    }
                });
            }
            var imgp = document.getElementById("imgp");
            var w = imgp.width;
            imgp.height = w;
            var img_iden = document.getElementById("identificacionImg");
            var wIden = img_iden.width;
            wIden.height = wIden;

            var database = firebase.database();
            auth.onAuthStateChanged(function (user) {
                if (user) {
                    var mail = user.email;
                    var encripta = cifrar(mail.toString());
                    var correo = encripta.palabraEncriptada;
                    fire.collection("IMAGENES").where("mail", "==", correo)
                            .get()
                            .then(function (querySnapshot) {
                                querySnapshot.forEach(function (doc) {

                                    var publicaciones = doc.data();
                                    profileFoto = publicaciones.foto;
                                    coverFoto = publicaciones.urlP;
                                    presentacion = publicaciones.presentacion;
                                    susM = publicaciones.susM;
                                    contra = publicaciones.contra;
                                    correoUserText = correo;
                                    deleteAccountC = publicaciones.deleteAccount;
                                    var cuentaVerificada = publicaciones.cuentaVerificada;
                                    if (cuentaVerificada) {
                                        document.getElementById("div_verificar").innerHTML = '<h2 style="font-family:Comic Sans MS,cursive;color:white;text-align: center;">Esta cuenta ya esta verificada</h2>';
                                    }
                                    checkedAccountP = publicaciones.checkedAccountP;
                                    if (checkedAccountP) {
                                        document.getElementById("div_verificar").innerHTML = '<h2 style="font-family:Comic Sans MS,cursive;color:white;text-align: center;">La verificacion esta en proceso</h2>';
                                    }
                                    if (profileFoto === "undefined") {

                                    } else if (profileFoto !== "undefined") {
                                        $("#imgprofile").attr("src", profileFoto);
                                        $("#imgprofile1").attr("src", profileFoto);
                                        $("#imgp").attr("src", profileFoto);
                                    }

                                    $("#nameForm").attr("value", publicaciones.nombre);
                                    $("#portadaImg").attr('src', coverFoto);
                                    $("#key").attr("value", publicaciones.uid);
                                    $("#presentation").val(presentacion);
                                    $("#susM").attr("value", susM);
                                    $("#correo").attr("value", correoUserText);
                                    if (contra) {
                                        document.getElementById("passW").style.display = '';
                                    } else {
                                        document.getElementById("contraD").innerHTML = '';
                                    }
                                    if (deleteAccountC) {
                                        document.getElementById("div_deleteA").innerHTML = '';
                                        $("#div_deleteA").append('<h2 style="color: white;font-family: Comic Sans MS, cursive;text-align: center">La solicitud de eliminacion esta en revisión</h2>');
                                    }


                                });
                            })
                            .catch(function (error) {
                            });
                } else {

                    location.replace("index.html");
                }
            });



            $("#file").change(function (e) {
                let reader = new FileReader();
                reader.readAsDataURL(e.target.files[0]);
                reader.onload = function () {
                    let preview = document.getElementById('imgp');
                    preview.src = reader.result;
                    preview.width = $("#imgp").width();
                    preview.style.borderRadius = "400px";
                };
                var mensajeErrorfile = document.getElementById("errorNameG");
                mensajeErrorfile.innerHTML = '';
                var file = document.getElementById("file");
                if (file.files.length > 0 && file.files.length < 2) {
                    var tamanoMax = 12000000;
                    var archivo = file.files[0];
                    if (archivo.size > tamanoMax) {
                        const tamanioEnMb = tamanoMax / 1000000;
                        mensajeErrorfile.innerHTML = '';
                        mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en profile Photo';
                        window.location.href = "#portada";
                    } else {

                    }
                } else {
                    if (file.files.length === 0) {
                        mensajeErrorfile.innerHTML = '';
                        mensajeErrorfile.innerHTML = 'Aun no hay imagen profile';
                        window.location.href = "#portada";
                    } else {
                        location.reload();
                        mensajeErrorfile.innerHTML = '';
                        mensajeErrorfile.innerHTML = 'Solo puede Subir 1 archivo';
                        window.location.href = "#portada";
                    }
                }



            });
            $("#fileP").change(function (e) {
                let reader = new FileReader();
                reader.readAsDataURL(e.target.files[0]);
                reader.onload = function () {
                    let preview = document.getElementById('portadaImg');
                    preview.src = reader.result;
                    preview.width = $("#portadaImg").width();
                    preview.style.borderRadius = "25px";
                };
                var mensajeErrorfile = document.getElementById("errorNameG");
                mensajeErrorfile.innerHTML = '';
                var fileP = document.getElementById("fileP");
                if (fileP.files.length > 0 && fileP.files.length < 2) {
                    var tamanoMax = 12000000;
                    var archivo = fileP.files[0];
                    if (archivo.size > tamanoMax) {
                        const tamanioEnMb = tamanoMax / 1000000;
                        mensajeErrorfile.innerHTML = '';
                        mensajeErrorfile.innerHTML = 'El tamaño máximo es ' + tamanioEnMb + ' MB en Cover photo';
                        window.location.href = "#portada";
                    } else {

                    }
                } else {
                    if (fileP.files.length === 0) {
                        mensajeErrorfile.innerHTML = '';
                        mensajeErrorfile.innerHTML = 'Aun no hay imagen profile';
                        window.location.href = "#portada";
                    } else {
                        location.reload();
                        mensajeErrorfile.innerHTML = '';
                        mensajeErrorfile.innerHTML = 'Solo puede Subir 1 archivo';
                        window.location.href = "#portada";
                    }
                }



            });
            var database = firebase.database();
            auth.onAuthStateChanged(function (user) {
                if (user) {
                    var mail = user.email;
                    var encripta = cifrar(mail.toString());
                    var correo = encripta.palabraEncriptada;
                    fire.collection("IMAGENES").where("mail", "==", correo)
                            .onSnapshot(function (querySnapshot) {
                                var cities = [];
                                querySnapshot.forEach(function (doc) {
                                    publicaciones = doc.data();
                                    if (correo === publicaciones.mail) {
                                        newN = publicaciones.new;
                                        newC = publicaciones.newC;
                                        newD = publicaciones.newD;
                                        var uid = publicaciones.uid;
                                        cities.push(newN + " : " + newC + " : " + uid);
                                        if (publicaciones.new) {

                                            $("#button_Not").attr("onclick", "deleteN('" + uid + "')");
                                            $("#button_NotT").attr("onclick", "deleteN('" + uid + "')");
                                            divNot = document.getElementById("not");
                                            divNotTog = document.getElementById("notT");
                                            withN = 35;
                                            heightW = 35;
                                            withNT = 30;
                                            heightWT = 30;
                                            divNot.innerHTML = '';
                                            divNotTog.innerHTML = '';


                                            $("#notT").append("<img style='width: " + withNT + "px;height: " + heightWT + "px;margin-top: 8px;margin-bottom: 8px' class='zoom' src='img/newNot.png'>");

                                            $("#not").append("<img style='width: " + withN + "px;height: " + heightW + "px;margin-top: 8px;margin-bottom: 8px' class='zoom' src='img/newNot.png'>");

                                        }
                                        if (publicaciones.newM) {
                                            $("#notificacion").attr("src", "img/MensajeBlanco(1).png");
                                            $("#notificacion1").attr("src", "img/MensajeBlanco(1).png");
                                            $("#downR").attr("src", "img/downR.png");
                                            $("#button_Men").attr("onclick", "deleteM('" + uid + "')");
                                            $("#drop_men").attr("onclick", "deleteM('" + uid + "')");
                                        }
                                    } else {

                                    }
                                });

                            });
                }
            }
            );
            function verificarUser() {
                var loaderMensaje = document.getElementById("loaderMensaje");
                var ficheroVerificacion = document.getElementById("file_identificacion");
                var mensajeErrorVerificar = document.getElementById("mensajeErrorVerificar");
                if (ficheroVerificacion.files.length > 0 && ficheroVerificacion.files.length < 2) {
                    var tip = ficheroVerificacion.files[0].type;
                    if (tip === "image/jpeg"
                            || tip === "image/gif"
                            || tip === "image/png"
                            || tip === "image/tiff"
                            || tip === "image/pds"
                            || tip === "image/bmp") {
                        auth.onAuthStateChanged(function (user) {
                            if (user) {
                                var mail = user.email;
                                var encripta = cifrar(mail.toString());
                                var correo = encripta.palabraEncriptada;
                                correoInputVerificar = $("#correoInputVerificar").val();
                                if (correoInputVerificar === mail) {
                                    fire.collection("IMAGENES").where("mail", "==", correo)
                                            .onSnapshot(function (querySnapshot) {
                                                querySnapshot.forEach(function (doc) {
                                                    publicaciones = doc.data();
                                                    var contSeg = publicaciones.contSeg;
                                                    var uid = publicaciones.uid;
                                                    if (contSeg === undefined) {
                                                        contSeg = 0;
                                                    } else {
                                                        contSeg = parseInt(contSeg);
                                                    }
                                                    if (contSeg > 499) {
                                                        var element = document.getElementById("loader");
                                                        element.style.display = 'flex';
                                                        element.classList.toggle("loader");




                                                        tamanoFichero = ficheroVerificacion.files.length;
                                                        var canvas = document.createElement('canvas');
                                                        var MAX_WIDTH = 950;
                                                        img = ficheroVerificacion.files[0];
                                                        var _URL = window.URL || window.webkitURL;
                                                        var imageCan = new Image();
                                                        imageCan.src = _URL.createObjectURL(img);
                                                        imageCan.onload = function () {
                                                            var ancho = imageCan.width;
                                                            var alto = imageCan.height;
                                                            calc = ancho / alto;
                                                            if (ancho > MAX_WIDTH) {
                                                                ancho = MAX_WIDTH;
                                                                alto = ancho / calc;
                                                            }
                                                            canvas.width = ancho;
                                                            canvas.height = alto;
                                                            var ctx = canvas.getContext("2d");
                                                            ctx.drawImage(imageCan, 0, 0, ancho, alto);
                                                            canvas.toBlob((blob) => {
                                                                let file = new File([blob], "" + uid + ".jpg", {type: "image/jpeg"});
                                                                uploadTask = storageRef.child('verificacionImg/' + uid).put(file);
                                                                uploadTask.on('state_changed', function (snapshot) {
                                                                    var progress = parseInt((snapshot.bytesTransferred / snapshot.totalBytes) * 100);
                                                                    loaderMensaje.innerHTML = 'Cargando ' + progress + '% por favor espere...';
                                                                    switch (snapshot.state) {
                                                                        case firebase.storage.TaskState.PAUSED:
                                                                            loaderMensaje.innerHTML = 'Error la carga se ha pausado';
                                                                            break;
                                                                        case firebase.storage.TaskState.RUNNING:
                                                                            break;
                                                                    }
                                                                }, function (error) {
                                                                }, function () {
                                                                    uploadTask.snapshot.ref.getDownloadURL().then(function (downloadURL) {
                                                                        var checkedAccount = {
                                                                            checkedAccountP: "checkedAccountP",
                                                                            urlcheckedAccountP: downloadURL
                                                                        };
                                                                        var docrefVerificacion = fire.collection('IMAGENES').doc(uid);
                                                                        docrefVerificacion.update(checkedAccount).then(function () {
                                                                            location.reload();
                                                                            document.getElementById("div_verificar").innerHTML = '<h2 style="font-family:Comic Sans MS,cursive;color:white;text-align: center;">La verificacion esta en proceso</h2>';
                                                                        });
                                                                    });
                                                                });
                                                            }, 'image/jpeg');
                                                        };




                                                    } else {
                                                        mensajeErrorVerificar.innerHTML = '';
                                                        mensajeErrorVerificar.innerHTML = 'Necesita al menos 500 Enjoyers para solicitar verificacion';
                                                        window.location.href = '#verificar';
                                                    }

                                                });
                                            });
                                } else {
                                    mensajeErrorVerificar.innerHTML = '';
                                    mensajeErrorVerificar.innerHTML = 'El correo no coincide';
                                    window.location.href = "#divMEV";
                                }
                            }
                        });
                    } else {
                        mensajeErrorVerificar.innerHTML = '';
                        mensajeErrorVerificar.innerHTML = 'Este formato no se reconoce';
                        window.location.href = "#divMEV";
                    }
                } else {
                    if (ficheroVerificacion.files.length === 0) {
                        mensajeErrorVerificar.innerHTML = '';
                        mensajeErrorVerificar.innerHTML = 'Aun no hay selfie';
                        window.location.href = "#divMEV";
                    } else {
                        location.reload();
                        mensajeErrorVerificar.innerHTML = '';
                        mensajeErrorVerificar.innerHTML = 'Solo puede Subir 1 archivo';
                        window.location.href = "#divMEV";
                    }

                }
            }
            function validarSusM() {
                var susMc = $("#susM").val();
                var filtro = "<>";
                document.getElementById("errorSusM").innerHTML = '';
                for (var i = 0; i < susMc.length; i++) {
                    if (filtro.indexOf(susMc.charAt(i)) > -1) {
                        document.getElementById("errorSusM").innerHTML = '< ó > no son caracteres validos';
                    }
                }
            }
        </script>

    </body>
</html>
